<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@yield('title', 'Technophiles Den')</title>

    {{-- Global styles --}}
    
    <link rel="stylesheet" href="{{ asset('css/layout/header.css') }}" />

    {{-- Per-page styles --}}
    @stack('styles')

    {{-- Basic SEO --}}
    <meta name="description" content="@yield('meta_description', 'Cloud | DevOps | Security | AI | Products')" />
    <link rel="canonical" href="https://technophilesden.com/" />
</head>

<body>
    <!-- Navigation Header -->
    <header class="tpd-nav-wrapper" id="tpd-navbar">
        <div class="tpd-nav-container">
            <div class="tpd-brand-section">
                <a class="tpd-brand-logo" href="{{ url('/') }}">
                    <img src="{{ asset('img/tpd-without-bg.webp') }}" alt="Technophiles Den Logo" />
                </a>
                <a class="tpd-brand-text" href="{{ url('/') }}">TECHNOPHILES DEN</a>
            </div>

            <!-- Desktop Navigation Links -->
            <nav class="tpd-nav-links">
                <a href="{{ route('about') }}" class="tpd-nav-link">About Us</a>

                <!-- Products -->
                <div class="tpd-nav-dropdown">
                    <a href="javascript:void(0)" class="tpd-nav-link tpd-nav-link-dropdown" id="tpd-desktop-products-link">
                        Products
                        <svg class="tpd-dropdown-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6" />
                        </svg>
                    </a>
                    <div class="tpd-dropdown-content" id="tpd-desktop-dropdown">
                        <a href="{{ route('products.chatbot') }}" class="tpd-dropdown-item"><span
                                class="tpd-dropdown-icon">ğŸ¤–</span> Chat Bot</a>
                        <a href="{{ route('products.crm') }}" class="tpd-dropdown-item"><span
                                class="tpd-dropdown-icon">ğŸ‘¥</span> CRM</a>
                        <a href="{{ route('products.hrms') }}" class="tpd-dropdown-item"><span
                                class="tpd-dropdown-icon">ğŸ‘¤</span> HRMS</a>
                        <a href="{{ route('products.monitor') }}" class="tpd-dropdown-item"><span
                                class="tpd-dropdown-icon">ğŸ“Š</span> Monitoring Tool</a>
                    </div>
                </div>

                <a href="{{ route('models') }}" class="tpd-nav-link">Models</a>

                <!-- Services -->
                <div class="tpd-nav-dropdown tpd-services-dropdown">
                    <a href="javascript:void(0)" class="tpd-nav-link tpd-nav-link-dropdown" id="tpd-desktop-services-link">
                        Services
                        <svg class="tpd-dropdown-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6" />
                        </svg>
                    </a>

                    <div class="tpd-dropdown-content tpd-services-dropdown-content" id="tpd-desktop-services-dropdown">

                        <!-- Digital Marketing -->
                        <div class="tpd-dropdown-group">
                            <div class="tpd-dropdown-item tpd-dropdown-parent" data-submenu="digital-marketing">
                                <span class="tpd-dropdown-icon">ğŸ“¢</span>
                                <span class="tpd-dropdown-text">Digital Marketing</span>
                                <svg class="tpd-submenu-arrow" width="14" height="14" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6" />
                                </svg>

                                <div class="tpd-submenu-content" id="tpd-submenu-digital-marketing">
                                    <a href="{{ route('services.digital-marketing.seo') }}" class="tpd-submenu-item"><span
                                            class="tpd-submenu-icon">ğŸ”</span> SEO</a>
                                    <a href="{{ route('services.digital-marketing.sem') }}" class="tpd-submenu-item"><span
                                            class="tpd-submenu-icon">ğŸ’°</span> SEM</a>
                                    <a href="{{ route('services.digital-marketing.smm') }}" class="tpd-submenu-item"><span
                                            class="tpd-submenu-icon">ğŸ“±</span> SMM</a>
                                    <a href="{{ route('services.digital-marketing.content-marketing') }}" class="tpd-submenu-item"><span
                                            class="tpd-submenu-icon">ğŸ“</span> Content Marketing</a>
                                    <a href="{{ route('services.digital-marketing.email-marketing') }}" class="tpd-submenu-item"><span
                                            class="tpd-submenu-icon">ğŸ“§</span> Email Marketing</a>
                                    <a href="{{ route('services.digital-marketing.affiliate-marketing') }}" class="tpd-submenu-item"><span
                                            class="tpd-submenu-icon">ğŸ¤</span> Affiliate Marketing</a>
                                    <a href="{{ route('services.digital-marketing.influencer-marketing') }}" class="tpd-submenu-item"><span
                                            class="tpd-submenu-icon">ğŸŒŸ</span> Influencer Marketing</a>
                                    <a href="{{ route('services.digital-marketing.marketing-automation') }}" class="tpd-submenu-item"><span
                                            class="tpd-submenu-icon">âš™ï¸</span> Marketing Automation</a>
                                </div>
                            </div>
                        </div>

                        <!-- Multicloud -->
                        <!-- <div class="tpd-dropdown-group">
                            <div class="tpd-dropdown-item tpd-dropdown-parent" data-submenu="multicloud">
                                <span class="tpd-dropdown-icon">â˜ï¸</span>
                                <span class="tpd-dropdown-text">Multicloud</span>
                                <svg class="tpd-submenu-arrow" width="14" height="14" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6" />
                                </svg>

                                <div class="tpd-submenu-content" id="tpd-submenu-multicloud">
                                    <a href="{{ route('services.multicloud.aws') }}" class="tpd-submenu-item"><span
                                            class="tpd-submenu-icon">ğŸŸ </span> AWS</a>
                                    <a href="{{ route('services.multicloud.azure') }}" class="tpd-submenu-item"><span
                                            class="tpd-submenu-icon">ğŸ”µ</span> Azure</a>
                                    <a href="{{ route('services.multicloud.gcp') }}" class="tpd-submenu-item"><span
                                            class="tpd-submenu-icon">ğŸ”´</span> GCP</a>
                                </div>
                            </div>
                        </div> -->

                        <!-- Development -->
                        <div class="tpd-dropdown-group">
                            <div class="tpd-dropdown-item tpd-dropdown-parent" data-submenu="development">
                                <span class="tpd-dropdown-icon">ğŸ’»</span>
                                <span class="tpd-dropdown-text">Development</span>
                                <svg class="tpd-submenu-arrow" width="14" height="14" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6" />
                                </svg>

                                <div class="tpd-submenu-content" id="tpd-submenu-development">
                                    <a href="{{ route('services.development.software') }}" class="tpd-submenu-item"><span
                                            class="tpd-submenu-icon">ğŸ–¥ï¸</span> Web Development</a>
                                    <a href="{{ route('services.development.mobile') }}" class="tpd-submenu-item"><span
                                            class="tpd-submenu-icon">ğŸ“±</span> Mobile App Development</a>
                                </div>
                            </div>
                        </div>

                        <!-- Single services -->
                        <a href="{{ route('services.cyber-security') }}" class="tpd-dropdown-item"><span
                                class="tpd-dropdown-icon">ğŸ”’</span> Cyber Security</a>
                        <a href="{{ route('services.blockchain') }}" class="tpd-dropdown-item"><span
                                class="tpd-dropdown-icon">â›“ï¸</span> Blockchain Development</a>
                        <a href="{{ route('services.ai-ml-devops') }}" class="tpd-dropdown-item"><span
                                class="tpd-dropdown-icon">ğŸ¤–</span> AI, ML & DevOps</a>
                        <a href="{{ route('services.data-science') }}" class="tpd-dropdown-item"><span
                                class="tpd-dropdown-icon">ğŸ“ˆ</span> Data Science</a>

                        <!-- Others -->
                        <div class="tpd-dropdown-group">
                            <div class="tpd-dropdown-item tpd-dropdown-parent" data-submenu="others">
                                <span class="tpd-dropdown-icon">âš™ï¸</span>
                                <span class="tpd-dropdown-text">Others</span>
                                <svg class="tpd-submenu-arrow" width="14" height="14" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6" />
                                </svg>

                                <div class="tpd-submenu-content" id="tpd-submenu-others">
                                    <a href="{{ route('services.others.staff-augmentation') }}"
                                        class="tpd-submenu-item"><span class="tpd-submenu-icon">ğŸ‘¨â€ğŸ’¼</span> Staff
                                        Augmentation</a>
                                    <a href="{{ route('services.others.remote-infrastructure') }}"
                                        class="tpd-submenu-item"><span class="tpd-submenu-icon">ğŸŒ</span> Remote
                                        Infrastructure</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Study Dropdown -->
                <!-- <div class="tpd-nav-dropdown tpd-study-dropdown">
                    <a href="javascript:void(0)" class="tpd-nav-link tpd-nav-link-dropdown" id="tpd-desktop-study-link">
                        Other
                        <svg class="tpd-dropdown-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6" />
                        </svg>
                    </a>
                    <div class="tpd-dropdown-content" id="tpd-desktop-study-dropdown">
                        <a href="{{ route('case-studies.index') }}" class="tpd-dropdown-item">
                            <span class="tpd-dropdown-icon">ğŸ“‹</span> Case Studies
                        </a>
                        <a href="{{ route('blogs.index') }}" class="tpd-dropdown-item">
                            <span class="tpd-dropdown-icon">ğŸ“</span> Blogs
                        </a>
                    </div>
                </div> -->

                <a href="{{ url('/contact') }}" class="tpd-nav-link">Contact</a>

                <a class="tpd-btn tpd-btn-primary" href="{{ url('/contact') }}">
                    <span class="tpd-btn-text"> Consultation</span>
                    <svg class="tpd-btn-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M5 12h14M12 5l7 7-7 7" />
                    </svg>
                </a>
            </nav>

            <!-- New Cyclone Mobile Menu Button -->
            <button class="tpd-cyclone-mobile-btn" aria-label="Open navigation menu" aria-expanded="false">
                <div class="tpd-cyclone-icon">
                    <div class="tpd-cyclone-bars"></div>
                </div>
            </button>
        </div>
    </header>

   <!-- New Cyclone Mobile Menu Overlay -->
<div class="tpd-cyclone-menu-overlay" aria-hidden="true" role="navigation" aria-label="Mobile Navigation">
    <!-- Add Close Button -->
    <button class="tpd-cyclone-close-btn" aria-label="Close navigation menu">
        <div class="tpd-cyclone-close-icon"></div>
    </button>
    
    <div class="tpd-cyclone-menu-content">
        <!-- Brand Header -->
        <div class="tpd-cyclone-brand-header">
            <a class="tpd-brand-logo" href="{{ url('/') }}">
                    <img src="{{ asset('img/tpd-without-bg.webp') }}" alt="Technophiles Den Logo" />
            </a>
        </div>

        <!-- Navigation List -->
        <div class="tpd-cyclone-nav-list">
            <!-- About Us -->
            <div class="tpd-cyclone-nav-item">
                <a href="{{ route('about') }}" class="tpd-cyclone-nav-link">
                    <span class="tpd-cyclone-link-icon">ğŸ¢</span>
                    About Us
                </a>
            </div>

            <!-- Products Dropdown -->
            <div class="tpd-cyclone-nav-item">
                <div class="tpd-cyclone-dropdown" data-dropdown="products">
                    <button class="tpd-cyclone-dropdown-toggle" data-cyclone-dropdown="products" aria-expanded="false">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span class="tpd-cyclone-link-icon">ğŸ“¦</span>
                            Products
                        </div>
                        <svg class="tpd-cyclone-dropdown-arrow" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"></path>
                        </svg>
                    </button>
                    <div class="tpd-cyclone-dropdown-content" data-cyclone-content="products">
                          <a href="{{ route('products.chatbot') }}" class="tpd-cyclone-dropdown-item">
                            <span class="tpd-cyclone-item-icon">ğŸ¤–</span>
                            Chat Bot
                        </a>
                        <a href="{{ route('products.crm') }}" class="tpd-cyclone-dropdown-item">
                            <span class="tpd-cyclone-item-icon">ğŸ’¼</span>
                            CRM
                        </a>
                        <a href="{{ route('products.hrms') }}" class="tpd-cyclone-dropdown-item">
                            <span class="tpd-cyclone-item-icon">ğŸ‘¥</span>
                            HRMS
                        </a>
                        <a href="{{ route('products.monitor') }}" class="tpd-cyclone-dropdown-item">
                            <span class="tpd-cyclone-item-icon">ğŸ“Š</span>
                            Monitoring Tool
                        </a>
                    </div>
                </div>
            </div>

            <!-- Models -->
            <div class="tpd-cyclone-nav-item">
                <a href="{{ route('models') }}" class="tpd-cyclone-nav-link">
                    <span class="tpd-cyclone-link-icon">ğŸ—ï¸</span>
                    Models
                </a>
            </div>

            <!-- Services Dropdown with Submenus -->
            
<div class="tpd-cyclone-nav-item">
    <div class="tpd-cyclone-dropdown tpd-cyclone-services-dropdown" data-dropdown="services">
        <button class="tpd-cyclone-dropdown-toggle" data-cyclone-dropdown="services" aria-expanded="false">
            <div style="display: flex; align-items: center; gap: 15px;">
                <span class="tpd-cyclone-link-icon">âš™ï¸</span>
                Services
            </div>
            <svg class="tpd-cyclone-dropdown-arrow" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"></path>
            </svg>
        </button>
        <div class="tpd-cyclone-dropdown-content" data-cyclone-content="services">
            
            <!-- Digital Marketing Service Group -->
            <div class="tpd-cyclone-service-group">
                <button class="tpd-cyclone-service-parent" data-submenu="digital-marketing">
                    <div class="tpd-cyclone-service-content">
                        <span class="tpd-cyclone-item-icon">ğŸ“¢</span>
                        Digital Marketing
                    </div>
                    <svg class="tpd-cyclone-service-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 9l6 6 6-6"></path>
                    </svg>
                </button>
                <div class="tpd-cyclone-submenu-content">
                    <a href="{{ route('services.digital-marketing.seo') }}" class="tpd-cyclone-submenu-item">
                        <span class="tpd-cyclone-subitem-icon">ğŸ”</span>
                        SEO
                    </a>
                    <a href="{{ route('services.digital-marketing.sem') }}" class="tpd-cyclone-submenu-item">
                        <span class="tpd-cyclone-subitem-icon">ğŸ’°</span>
                        SEM
                    </a>
                    <a href="{{ route('services.digital-marketing.smm') }}" class="tpd-cyclone-submenu-item">
                        <span class="tpd-cyclone-subitem-icon">ğŸ“±</span>
                        SMM
                    </a>
                    <a href="{{ route('services.digital-marketing.content-marketing') }}" class="tpd-cyclone-submenu-item">
                        <span class="tpd-cyclone-subitem-icon">ğŸ“</span>
                        Content Marketing
                    </a>
                    <a href="{{ route('services.digital-marketing.email-marketing') }}" class="tpd-cyclone-submenu-item">
                        <span class="tpd-cyclone-subitem-icon">ğŸ“§</span>
                        Email Marketing
                    </a>
                    <a href="{{ route('services.digital-marketing.affiliate-marketing') }}" class="tpd-cyclone-submenu-item">
                        <span class="tpd-cyclone-subitem-icon">ğŸ¤</span>
                        Affiliate Marketing
                    </a>
                    <a href="{{ route('services.digital-marketing.influencer-marketing') }}" class="tpd-cyclone-submenu-item">
                        <span class="tpd-cyclone-subitem-icon">ğŸŒŸ</span>
                        Influencer Marketing
                    </a>
                    <a href="{{ route('services.digital-marketing.marketing-automation') }}" class="tpd-cyclone-submenu-item">
                        <span class="tpd-cyclone-subitem-icon">âš™ï¸</span>
                        Marketing Automation
                    </a>
                </div>
            </div>

            <!-- Multicloud Service Group -->
            <!-- <div class="tpd-cyclone-service-group">
                <button class="tpd-cyclone-service-parent" data-submenu="multicloud">
                    <div class="tpd-cyclone-service-content">
                        <span class="tpd-cyclone-item-icon">â˜ï¸</span>
                        Multicloud
                    </div>
                    <svg class="tpd-cyclone-service-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 9l6 6 6-6"></path>
                    </svg>
                </button>
                <div class="tpd-cyclone-submenu-content">
                    <a href="{{ route('services.multicloud.aws') }}" class="tpd-cyclone-submenu-item">
                        <span class="tpd-cyclone-subitem-icon">ğŸš€</span>
                        AWS
                    </a>
                    <a href="{{ route('services.multicloud.azure') }}" class="tpd-cyclone-submenu-item">
                        <span class="tpd-cyclone-subitem-icon">ğŸ’</span>
                        Azure
                    </a>
                    <a href="{{ route('services.multicloud.gcp') }}" class="tpd-cyclone-submenu-item">
                        <span class="tpd-cyclone-subitem-icon">ğŸŒŸ</span>
                        GCP
                    </a>
                </div>
            </div> -->

            <!-- Development Service Group -->
            <div class="tpd-cyclone-service-group">
                <button class="tpd-cyclone-service-parent" data-submenu="development">
                    <div class="tpd-cyclone-service-content">
                        <span class="tpd-cyclone-item-icon">ğŸ’»</span>
                        Development
                    </div>
                    <svg class="tpd-cyclone-service-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 9l6 6 6-6"></path>
                    </svg>
                </button>
                <div class="tpd-cyclone-submenu-content">
                    <a href="{{ route('services.development.software') }}" class="tpd-cyclone-submenu-item">
                        <span class="tpd-cyclone-subitem-icon">ğŸŒ</span>
                        Web Development
                    </a>
                    <a href="{{ route('services.development.mobile') }}" class="tpd-cyclone-submenu-item">
                        <span class="tpd-cyclone-subitem-icon">ğŸ“±</span>
                        Mobile App Development
                    </a>
                </div>
            </div>

            <!-- Single Services -->
            <a href="{{ route('services.cyber-security') }}" class="tpd-cyclone-dropdown-item">
                <span class="tpd-cyclone-item-icon">ğŸ”’</span>
                Cyber Security
            </a>
            <a href="{{ route('services.blockchain') }}" class="tpd-cyclone-dropdown-item">
                <span class="tpd-cyclone-item-icon">ğŸ”—</span>
                Blockchain Development
            </a>
            <a href="{{ route('services.ai-ml-devops') }}" class="tpd-cyclone-dropdown-item">
                <span class="tpd-cyclone-item-icon">ğŸ¤–</span>
                AI, ML & DevOps
            </a>
            <a href="{{ route('services.data-science') }}" class="tpd-cyclone-dropdown-item">
                <span class="tpd-cyclone-item-icon">ğŸ“ˆ</span>
                Data Science
            </a>

            <!-- Others Service Group -->
            <div class="tpd-cyclone-service-group othergroup">
                <button class="tpd-cyclone-service-parent" data-submenu="others">
                    <div class="tpd-cyclone-service-content">
                        <span class="tpd-cyclone-item-icon">ğŸ”§</span>
                        Others
                    </div>
                    <svg class="tpd-cyclone-service-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 9l6 6 6-6"></path>
                    </svg>
                </button>
                <div class="tpd-cyclone-submenu-content">
                    <a href="{{ route('services.others.staff-augmentation') }}" class="tpd-cyclone-submenu-item">
                        <span class="tpd-cyclone-subitem-icon">ğŸ‘¨â€ğŸ’¼</span>
                        Staff Augmentation
                    </a>
                    <a href="{{ route('services.others.remote-infrastructure') }}" class="tpd-cyclone-submenu-item">
                        <span class="tpd-cyclone-subitem-icon">ğŸŒ</span>
                        Remote Infrastructure
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

            <!-- Study Dropdown -->
            <!-- <div class="tpd-cyclone-nav-item">
                <div class="tpd-cyclone-dropdown" data-dropdown="study">
                    <button class="tpd-cyclone-dropdown-toggle" data-cyclone-dropdown="study" aria-expanded="false">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span class="tpd-cyclone-link-icon">ğŸ“š</span>
                            Other
                        </div>
                        <svg class="tpd-cyclone-dropdown-arrow" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"></path>
                        </svg>
                    </button>
                    <div class="tpd-cyclone-dropdown-content" data-cyclone-content="study">
                        <a href="{{ route('case-studies.index') }}" class="tpd-cyclone-dropdown-item">
                            <span class="tpd-cyclone-item-icon">ğŸ“‹</span>
                            Case Studies
                        </a>
                        <a href="{{ route('blogs.index') }}" class="tpd-cyclone-dropdown-item">
                            <span class="tpd-cyclone-item-icon">ğŸ“</span>
                            Blogs
                        </a>
                    </div>
                </div>
            </div> -->

            <!-- Contact -->
            <div class="tpd-cyclone-nav-item">
                <a href="{{ url('contact') }}" class="tpd-cyclone-nav-link">
                    <span class="tpd-cyclone-link-icon">ğŸ“</span>
                    Contact
                </a>
            </div>
        </div>

        <!-- CTA Section -->
        <div class="tpd-cyclone-cta-section">
            <a href="{{ url('contact') }}" class="tpd-cyclone-cta-btn">
                <span class="tpd-cyclone-cta-icon">ğŸ’¬</span>
                 Consultation
                <svg class="tpd-cyclone-cta-arrow" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7"></path>
                </svg>
            </a>
        </div>
    </div>
</div>

    <!-- JavaScript -->
   <script defer>
    class TPDCycloneNavigationController {
        constructor() {
            this.scrollPosition = 0;
            this.isMenuOpen = false;
            this.activeDropdowns = new Set();
            this.activeSubmenus = new Set();
            this.touchStartY = 0;
            this.touchEndY = 0;
            this.init();
        }

        init() {
            this.bindEvents();
            this.initializeDesktopDropdowns();
            this.initializeCycloneMenu();
            this.setupKeyboardNavigation();
            this.setupTouchHandling();
        }

        clearAllMenuFocus() {
            const cycloneOverlay = document.querySelector('.tpd-cyclone-menu-overlay');
            if (!cycloneOverlay) return;

            const focusableElements = cycloneOverlay.querySelectorAll(
                `button, a, input, select, textarea, [tabindex]:not([tabindex="-1"]),
                .tpd-cyclone-nav-link, .tpd-cyclone-dropdown-toggle, .tpd-cyclone-dropdown-item,
                .tpd-cyclone-service-parent, .tpd-cyclone-submenu-item, .tpd-cyclone-cta-btn, .tpd-cyclone-close-btn`
            );

            focusableElements.forEach(element => {
                if (element === document.activeElement) {
                    element.blur();
                }
                element.setAttribute('tabindex', '-1');
            });

            if (document.activeElement && cycloneOverlay.contains(document.activeElement)) {
                document.activeElement.blur();
            }

            setTimeout(() => {
                focusableElements.forEach(element => {
                    if (element === document.activeElement) {
                        element.blur();
                    }
                });
                document.body.focus();
            }, 10);
        }

        restoreMenuFocus() {
            const cycloneOverlay = document.querySelector('.tpd-cyclone-menu-overlay');
            if (!cycloneOverlay) return;

            const focusableElements = cycloneOverlay.querySelectorAll(
                `.tpd-cyclone-nav-link, .tpd-cyclone-dropdown-toggle, .tpd-cyclone-dropdown-item,
                .tpd-cyclone-service-parent, .tpd-cyclone-submenu-item, .tpd-cyclone-cta-btn, .tpd-cyclone-close-btn`
            );

            focusableElements.forEach(element => {
                element.removeAttribute('tabindex');
            });
        }

        lockScroll() {
            this.scrollPosition = window.pageYOffset;
            document.body.classList.add('tpd-cyclone-menu-open');
            document.body.style.top = `-${this.scrollPosition}px`;
        }

        unlockScroll() {
            document.body.classList.remove('tpd-cyclone-menu-open');
            document.body.style.removeProperty('top');
            window.scrollTo(0, this.scrollPosition);
        }

        openCycloneMenu() {
            const cycloneBtn = document.querySelector('.tpd-cyclone-mobile-btn');
            const cycloneOverlay = document.querySelector('.tpd-cyclone-menu-overlay');
            const cycloneBackdrop = document.querySelector('.tpd-cyclone-backdrop') || this.createBackdrop();

            if (!cycloneBtn || !cycloneOverlay) return;

            cycloneOverlay.removeAttribute('aria-hidden');
            this.restoreMenuFocus();

            this.isMenuOpen = true;
            cycloneBtn.classList.add('tpd-active');
            cycloneOverlay.classList.add('tpd-active');
            cycloneBackdrop.classList.add('tpd-active');
            cycloneBtn.setAttribute('aria-expanded', 'true');

            this.lockScroll();
            this.animateCycloneEntry();

            setTimeout(() => {
                const firstNavLink = cycloneOverlay.querySelector('.tpd-cyclone-nav-link, .tpd-cyclone-dropdown-toggle');
                if (firstNavLink && !cycloneOverlay.hasAttribute('aria-hidden')) {
                    firstNavLink.focus();
                }
            }, 600);
        }

        closeCycloneMenu() {
            const cycloneBtn = document.querySelector('.tpd-cyclone-mobile-btn');
            const cycloneOverlay = document.querySelector('.tpd-cyclone-menu-overlay');
            const cycloneBackdrop = document.querySelector('.tpd-cyclone-backdrop');

            if (!cycloneBtn || !cycloneOverlay) return;

            this.clearAllMenuFocus();

            this.isMenuOpen = false;
            cycloneBtn.classList.remove('tpd-active');
            cycloneOverlay.classList.remove('tpd-active');
            if (cycloneBackdrop) cycloneBackdrop.classList.remove('tpd-active');
            cycloneBtn.setAttribute('aria-expanded', 'false');

            setTimeout(() => {
                this.clearAllMenuFocus();
                cycloneOverlay.setAttribute('aria-hidden', 'true');
            }, 150);

            this.unlockScroll();
            this.resetCycloneMenu();

            setTimeout(() => {
                cycloneBtn.focus();
            }, 200);
        }

        createBackdrop() {
            const backdrop = document.createElement('div');
            backdrop.className = 'tpd-cyclone-backdrop';
            document.body.appendChild(backdrop);
            return backdrop;
        }

        animateCycloneEntry() {
            const navItems = document.querySelectorAll('.tpd-cyclone-nav-item');
            navItems.forEach((item, index) => {
                item.style.transitionDelay = `${0.4 + index * 0.1}s`;
            });
        }

        resetCycloneMenu() {
            this.activeDropdowns.forEach(dropdown => dropdown.classList.remove('tpd-active'));
            this.activeSubmenus.forEach(submenu => submenu.classList.remove('tpd-active'));
            this.activeDropdowns.clear();
            this.activeSubmenus.clear();

            document.querySelectorAll('.tpd-cyclone-dropdown-toggle').forEach(toggle => {
                toggle.classList.remove('tpd-active');
                toggle.setAttribute('aria-expanded', 'false');
            });

            document.querySelectorAll('.tpd-cyclone-service-parent').forEach(parent => {
                parent.classList.remove('tpd-active');
            });

            document.querySelectorAll('.tpd-cyclone-dropdown').forEach(dropdown => {
                dropdown.classList.remove('tpd-active');
            });
        }

        toggleCycloneDropdown(dropdownElement, toggleElement) {
            const isActive = dropdownElement.classList.contains('tpd-active');

            if (isActive) {
                dropdownElement.classList.remove('tpd-active');
                toggleElement.classList.remove('tpd-active');
                toggleElement.setAttribute('aria-expanded', 'false');
                this.activeDropdowns.delete(dropdownElement);

                const parentDropdown = dropdownElement.closest('.tpd-cyclone-dropdown');
                if (parentDropdown) {
                    parentDropdown.classList.remove('tpd-active');
                }
            } else {
                dropdownElement.classList.add('tpd-active');
                toggleElement.classList.add('tpd-active');
                toggleElement.setAttribute('aria-expanded', 'true');
                this.activeDropdowns.add(dropdownElement);

                const parentDropdown = dropdownElement.closest('.tpd-cyclone-dropdown');
                if (parentDropdown) {
                    parentDropdown.classList.add('tpd-active');
                }
            }
        }

        toggleCycloneSubmenu(parentElement) {
            const isActive = parentElement.classList.contains('tpd-active');
            const allParents = document.querySelectorAll('.tpd-cyclone-service-parent');

            allParents.forEach(parent => {
                if (parent !== parentElement && parent.classList.contains('tpd-active')) {
                    parent.classList.remove('tpd-active');
                    this.activeSubmenus.delete(parent);
                }
            });

            if (isActive) {
                parentElement.classList.remove('tpd-active');
                this.activeSubmenus.delete(parentElement);
            } else {
                parentElement.classList.add('tpd-active');
                this.activeSubmenus.add(parentElement);
            }
        }

        initializeDesktopDropdowns() {
            this.initializeProductsDropdown();
            this.initializeServicesDropdown();
            this.initializeStudyDropdown();
        }

        initializeProductsDropdown() {
            const productsDropdown = document.querySelector('.tpd-nav-dropdown:not(.tpd-services-dropdown):not(.tpd-study-dropdown)');
            const productsLink = document.getElementById('tpd-desktop-products-link');

            if (!productsDropdown) return;

            let productsTimeout;

            productsDropdown.addEventListener('mouseenter', () => {
                clearTimeout(productsTimeout);
                productsDropdown.classList.add('tpd-active');
            });

            productsDropdown.addEventListener('mouseleave', () => {
                productsTimeout = setTimeout(() => {
                    productsDropdown.classList.remove('tpd-active');
                }, 200);
            });

            if (productsLink) {
                productsLink.addEventListener('focus', () => {
                    productsDropdown.classList.add('tpd-active');
                });

                productsLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    productsDropdown.classList.toggle('tpd-active');
                });
            }
        }

        initializeServicesDropdown() {
            const servicesDropdown = document.querySelector('.tpd-services-dropdown');
            const servicesDropdownContent = document.getElementById('tpd-desktop-services-dropdown');
            const servicesLink = document.getElementById('tpd-desktop-services-link');

            if (!servicesDropdown || !servicesDropdownContent) return;

            let dropdownTimeout;

            servicesDropdown.addEventListener('mouseenter', () => {
                clearTimeout(dropdownTimeout);
                servicesDropdown.classList.add('tpd-active');
            });

            servicesDropdown.addEventListener('mouseleave', () => {
                dropdownTimeout = setTimeout(() => {
                    servicesDropdown.classList.remove('tpd-active');
                    document.querySelectorAll('.tpd-dropdown-parent').forEach(p => p.classList.remove('tpd-active'));
                }, 300);
            });

            this.initializeDesktopSubmenus(servicesDropdownContent);

            if (servicesLink) {
                servicesLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    servicesDropdown.classList.toggle('tpd-active');
                });
            }
        }

        initializeStudyDropdown() {
            const studyDropdown = document.querySelector('.tpd-study-dropdown');
            const studyLink = document.getElementById('tpd-desktop-study-link');

            if (!studyDropdown) return;

            let studyTimeout;

            studyDropdown.addEventListener('mouseenter', () => {
                clearTimeout(studyTimeout);
                studyDropdown.classList.add('tpd-active');
            });

            studyDropdown.addEventListener('mouseleave', () => {
                studyTimeout = setTimeout(() => {
                    studyDropdown.classList.remove('tpd-active');
                }, 200);
            });

            if (studyLink) {
                studyLink.addEventListener('focus', () => {
                    studyDropdown.classList.add('tpd-active');
                });

                studyLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    studyDropdown.classList.toggle('tpd-active');
                });
            }
        }

        initializeDesktopSubmenus(container) {
            const dropdownParents = container.querySelectorAll('.tpd-dropdown-parent');

            dropdownParents.forEach(parent => {
                const submenu = parent.querySelector('.tpd-submenu-content');
                if (!submenu) return;

                let submenuTimeout;

                parent.addEventListener('mouseenter', () => {
                    clearTimeout(submenuTimeout);
                    dropdownParents.forEach(other => {
                        if (other !== parent) other.classList.remove('tpd-active');
                    });
                    parent.classList.add('tpd-active');
                });

                parent.addEventListener('mouseleave', () => {
                    submenuTimeout = setTimeout(() => {
                        parent.classList.remove('tpd-active');
                    }, 150);
                });

                submenu.addEventListener('mouseenter', () => {
                    clearTimeout(submenuTimeout);
                    parent.classList.add('tpd-active');
                });

                submenu.addEventListener('mouseleave', () => {
                    submenuTimeout = setTimeout(() => {
                        parent.classList.remove('tpd-active');
                    }, 150);
                });
            });
        }

        initializeCycloneMenu() {
            this.initializeCycloneDropdowns();
            this.initializeCycloneServices();
            this.bindCloseButton();
        }

        initializeCycloneDropdowns() {
            const productsToggle = document.querySelector('[data-cyclone-dropdown="products"]');
            const productsDropdown = document.querySelector('[data-cyclone-content="products"]');

            if (productsToggle && productsDropdown) {
                productsToggle.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    this.toggleCycloneDropdown(productsDropdown, productsToggle);
                });
            }

            const servicesToggle = document.querySelector('[data-cyclone-dropdown="services"]');
            const servicesDropdown = document.querySelector('[data-cyclone-content="services"]');

            if (servicesToggle && servicesDropdown) {
                servicesToggle.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    this.toggleCycloneDropdown(servicesDropdown, servicesToggle);
                });
            }

            const studyToggle = document.querySelector('[data-cyclone-dropdown="study"]');
            const studyDropdown = document.querySelector('[data-cyclone-content="study"]');

            if (studyToggle && studyDropdown) {
                studyToggle.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    this.toggleCycloneDropdown(studyDropdown, studyToggle);
                });
            }
        }

        initializeCycloneServices() {
            const serviceParents = document.querySelectorAll('.tpd-cyclone-service-parent');

            serviceParents.forEach(parent => {
                parent.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    this.toggleCycloneSubmenu(parent);
                });
            });

            const submenuItems = document.querySelectorAll('.tpd-cyclone-submenu-item');
            submenuItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    e.stopPropagation();
                });
            });

            const dropdownItems = document.querySelectorAll('.tpd-cyclone-dropdown-item');
            dropdownItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    e.stopPropagation();
                });
            });
        }

        bindCloseButton() {
            const closeBtn = document.querySelector('.tpd-cyclone-close-btn');
            if (closeBtn) {
                closeBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    this.closeCycloneMenu();
                });
            }
        }

        setupTouchHandling() {
            console.log('Touch handling initialized (swipe to close disabled)');
        }

        setupKeyboardNavigation() {
            document.addEventListener('keydown', (e) => {
                if (!this.isMenuOpen) return;

                switch (e.key) {
                    case 'Tab':
                        this.handleTabNavigation(e);
                        break;
                    case 'ArrowDown':
                    case 'ArrowUp':
                        this.handleArrowNavigation(e);
                        break;
                    case 'Enter':
                    case ' ':
                        this.handleEnterSpace(e);
                        break;
                }
            });
        }

        handleTabNavigation(e) {
            const focusableElements = document.querySelectorAll(
                `.tpd-cyclone-menu-overlay .tpd-cyclone-nav-link,
                .tpd-cyclone-menu-overlay .tpd-cyclone-dropdown-toggle,
                .tpd-cyclone-menu-overlay .tpd-cyclone-dropdown-item,
                .tpd-cyclone-menu-overlay .tpd-cyclone-service-parent,
                .tpd-cyclone-menu-overlay .tpd-cyclone-submenu-item,
                .tpd-cyclone-menu-overlay .tpd-cyclone-cta-btn,
                .tpd-cyclone-menu-overlay .tpd-cyclone-close-btn`
            );

            const visibleElements = Array.from(focusableElements).filter(el => {
                return el.offsetParent !== null && !el.hasAttribute('aria-hidden') && el.getAttribute('tabindex') !== '-1';
            });

            if (visibleElements.length === 0) return;

            const currentIndex = visibleElements.indexOf(document.activeElement);

            if (e.shiftKey) {
                const prevIndex = currentIndex <= 0 ? visibleElements.length - 1 : currentIndex - 1;
                visibleElements[prevIndex].focus();
            } else {
                const nextIndex = currentIndex >= visibleElements.length - 1 ? 0 : currentIndex + 1;
                visibleElements[nextIndex].focus();
            }

            e.preventDefault();
        }

        handleArrowNavigation(e) {
            const currentElement = document.activeElement;
            const isDropdownToggle = currentElement.classList.contains('tpd-cyclone-dropdown-toggle');
            const isServiceParent = currentElement.classList.contains('tpd-cyclone-service-parent');

            if (isDropdownToggle || isServiceParent) {
                e.preventDefault();

                if (e.key === 'ArrowDown') {
                    if (isDropdownToggle) {
                        const dropdown = currentElement.nextElementSibling;
                        if (dropdown && !dropdown.classList.contains('tpd-active')) {
                            this.toggleCycloneDropdown(dropdown, currentElement);
                        }
                        const firstItem = dropdown.querySelector('.tpd-cyclone-dropdown-item');
                        if (firstItem) firstItem.focus();
                    } else if (isServiceParent) {
                        const submenu = currentElement.nextElementSibling;
                        if (submenu && !currentElement.classList.contains('tpd-active')) {
                            this.toggleCycloneSubmenu(currentElement);
                        }
                        const firstItem = submenu.querySelector('.tpd-cyclone-submenu-item');
                        if (firstItem) firstItem.focus();
                    }
                }
            }
        }

        handleEnterSpace(e) {
            const currentElement = document.activeElement;

            if (currentElement.classList.contains('tpd-cyclone-dropdown-toggle')) {
                e.preventDefault();
                const dropdown = currentElement.nextElementSibling;
                if (dropdown) {
                    this.toggleCycloneDropdown(dropdown, currentElement);
                }
            } else if (currentElement.classList.contains('tpd-cyclone-service-parent')) {
                e.preventDefault();
                this.toggleCycloneSubmenu(currentElement);
            }
        }

        bindEvents() {
            this.bindCycloneMenuEvents();
            this.bindDesktopEvents();
            this.bindResizeEvents();
        }

        bindCycloneMenuEvents() {
            const cycloneBtn = document.querySelector('.tpd-cyclone-mobile-btn');
            const cycloneOverlay = document.querySelector('.tpd-cyclone-menu-overlay');

            if (cycloneBtn) {
                cycloneBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();

                    if (this.isMenuOpen) {
                        this.closeCycloneMenu();
                    } else {
                        this.openCycloneMenu();
                    }
                });
            }

            if (cycloneOverlay) {
                const menuContent = cycloneOverlay.querySelector('.tpd-cyclone-menu-content');
                if (menuContent) {
                    menuContent.addEventListener('click', (e) => {
                        e.stopPropagation();
                    });
                }
            }
        }

        bindDesktopEvents() {
            document.addEventListener('click', (e) => {
                const isInsideNavigation = e.target.closest('.tpd-nav-dropdown');

                if (!isInsideNavigation) {
                    document.querySelectorAll('.tpd-nav-dropdown.tpd-active').forEach(dropdown => {
                        dropdown.classList.remove('tpd-active');
                    });

                    document.querySelectorAll('.tpd-dropdown-parent.tpd-active').forEach(parent => {
                        parent.classList.remove('tpd-active');
                    });
                }
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && !this.isMenuOpen) {
                    document.querySelectorAll('.tpd-nav-dropdown.tpd-active').forEach(dropdown => {
                        dropdown.classList.remove('tpd-active');
                    });

                    document.querySelectorAll('.tpd-dropdown-parent.tpd-active').forEach(parent => {
                        parent.classList.remove('tpd-active');
                    });
                }
            });
        }

        bindResizeEvents() {
            let resizeTimer;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(() => {
                    if (window.innerWidth > 1024 && this.isMenuOpen) {
                        this.closeCycloneMenu();
                    }

                    if (window.innerWidth > 768) {
                        document.querySelectorAll('.tpd-nav-dropdown.tpd-active').forEach(dropdown => {
                            dropdown.classList.remove('tpd-active');
                        });

                        document.querySelectorAll('.tpd-dropdown-parent.tpd-active').forEach(parent => {
                            parent.classList.remove('tpd-active');
                        });
                    }
                }, 250);
            });
        }

        openMenu() {
            this.openCycloneMenu();
        }

        closeMenu() {
            this.closeCycloneMenu();
        }

        toggleMenu() {
            if (this.isMenuOpen) {
                this.closeCycloneMenu();
            } else {
                this.openCycloneMenu();
            }
        }

        get menuOpen() {
            return this.isMenuOpen;
        }

        destroy() {
            const cycloneBtn = document.querySelector('.tpd-cyclone-mobile-btn');
            const cycloneOverlay = document.querySelector('.tpd-cyclone-menu-overlay');

            if (cycloneBtn) cycloneBtn.replaceWith(cycloneBtn.cloneNode(true));
            if (cycloneOverlay) cycloneOverlay.replaceWith(cycloneOverlay.cloneNode(true));

            if (this.isMenuOpen) {
                this.unlockScroll();
            }

            this.activeDropdowns.clear();
            this.activeSubmenus.clear();
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        window.tpdNavigation = new TPDCycloneNavigationController();
    });

    window.TPDCycloneNavigationController = TPDCycloneNavigationController;
</script>

    
    {{-- Page-specific scripts --}}
    @stack('scripts')
</body>

</html>