<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Case Studies • Technophiles Den</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- SEO -->
  <meta name="description" content="Explore cloud, DevOps, security, AI/ML and data case studies from Technophiles Den (TPD). See outcomes like higher availability, faster releases and lower costs." />
  <link rel="canonical" href="https://technophilesden.com/case-studies" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Case Studies • Technophiles Den" />
  <meta property="og:description" content="Cloud, DevOps, Security, AI/ML and Data success stories with measurable results." />
  <meta property="og:url" content="https://technophilesden.com/case-studies" />
  <meta property="og:image" content="{{ asset('img/Technophiles_Den.webp') }}" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Case Studies • Technophiles Den" />
  <meta name="twitter:description" content="Cloud, DevOps, Security, AI/ML and Data success stories with measurable results." />
  <meta name="twitter:image" content="{{ asset('img/Technophiles_Den.webp') }}" />

  <!-- Favicon -->
  <link rel="icon" href="{{ asset('favicon.ico') }}" type="image/x-icon" />
  <link rel="shortcut icon" href="{{ asset('favicon.ico') }}" />

  <!-- Fonts preload -->
  <link rel="preload" as="font" href="/fonts/Inter.woff2" type="font/woff2" crossorigin="anonymous" />

  <!-- Font Awesome non-blocking -->
  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" media="print" onload="this.media='all'" />
  <noscript>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  </noscript>

  <!-- CSS asynchronously loaded -->
  <link href="{{ asset('css/layout/header.css') }}" rel="stylesheet" media="print" onload="this.media='all'" />
  <link href="{{ asset('css/case-studies.css') }}" rel="stylesheet" media="print" onload="this.media='all'" />
  <link href="{{ asset('css/case-studies-modal.css') }}" rel="stylesheet" media="print" onload="this.media='all'" />
  <link href="{{ asset('css/layout/footer.css') }}" rel="stylesheet" media="print" onload="this.media='all'" />
  <noscript>
    <link href="{{ asset('css/layout/header.css') }}" rel="stylesheet" />
    <link href="{{ asset('css/case-studies.css') }}" rel="stylesheet" />
    <link href="{{ asset('css/case-studies-modal.css') }}" rel="stylesheet" />
    <link href="{{ asset('css/layout/footer.css') }}" rel="stylesheet" />
  </noscript>

  <!-- Structured Data -->
  @php
      $ld = [
          "@context" => "https://schema.org",
          "@graph" => [
              [
                  "@type" => "Organization",
                  "name" => "Technophiles Den",
                  "url" => url('/'),
                  "logo" => asset('favicon.ico'),
                  "sameAs" => []
              ],
              [
                  "@type" => "WebSite",
                  "url" => url('/'),
                  "name" => "Technophiles Den"
              ],
              [
                  "@type" => "BreadcrumbList",
                  "itemListElement" => [
                      ["@type" => "ListItem", "position" => 1, "name" => "Home", "item" => url('/')],
                      ["@type" => "ListItem", "position" => 2, "name" => "Case Studies", "item" => url()->current()]
                  ]
              ]
          ]
      ];
  @endphp
  <script type="application/ld+json">{!! json_encode($ld, JSON_UNESCAPED_SLASHES | JSON_UNESCAPED_UNICODE) !!}</script>

  <!-- Google Analytics (replace G-XXXXXXX with actual ID) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXX');
  </script>
</head>
<body>

@include('layout.header')
@include('components.floating-chatbot')


<main class="case-study-main" id="mainContent">
  <!-- Hero -->
  <section class="hero-section">
    <div class="container">
      <div class="hero-content">
        <div class="hero-text">
          <h1 class="hero-title">Case Studies</h1>
          <div class="hero-description">
            <h2>Power your purpose</h2>
            <p>Discover how TPD helps clients build a purpose-driven cloud foundation by combining deep industry experience with technical acumen to accelerate innovation and growth.</p>
          </div>

          <!-- Search -->
          <div class="search-container" role="search">
            <label for="caseStudySearch" class="sr-only">Search case studies</label>
            <div class="search-wrapper">
              <i class="fas fa-search search-icon" aria-hidden="true"></i>
              <input type="text" id="caseStudySearch" placeholder="Search case studies…" class="search-input" autocomplete="off">
              <button class="search-clear" id="clearSearch" type="button" aria-label="Clear search" hidden>
                <i class="fas fa-times" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>

        <div class="hero-graphic" aria-hidden="true"><div class="spiral-graphic"></div></div>
      </div>
    </div>
  </section>

  <!-- Filters -->
  <section class="filter-section" aria-labelledby="filtersHeading">
    <div class="container">
      <h2 id="filtersHeading" class="sr-only">Filter case studies</h2>
      <div class="filter-controls" role="tablist" aria-label="Filters">
        <div class="filter-tabs">
          <button class="filter-btn active" data-filter="all" role="tab" aria-selected="true"><i class="fas fa-th-large" aria-hidden="true"></i><span>All Cases</span></button>
          <button class="filter-btn" data-filter="cloud" role="tab" aria-selected="false"><i class="fas fa-cloud" aria-hidden="true"></i><span>Cloud</span></button>
          <button class="filter-btn" data-filter="security" role="tab" aria-selected="false"><i class="fas fa-shield-alt" aria-hidden="true"></i><span>Security</span></button>
          <button class="filter-btn" data-filter="devops" role="tab" aria-selected="false"><i class="fas fa-cogs" aria-hidden="true"></i><span>DevOps</span></button>
          <button class="filter-btn" data-filter="infrastructure" role="tab" aria-selected="false"><i class="fas fa-server" aria-hidden="true"></i><span>Infrastructure</span></button>
          <button class="filter-btn" data-filter="consulting" role="tab" aria-selected="false"><i class="fas fa-handshake" aria-hidden="true"></i><span>Consulting</span></button>
          <button class="filter-btn" data-filter="ai" role="tab" aria-selected="false"><i class="fas fa-brain" aria-hidden="true"></i><span>AI &amp; ML</span></button>
          <button class="filter-btn" data-filter="data" role="tab" aria-selected="false"><i class="fas fa-chart-bar" aria-hidden="true"></i><span>Data</span></button>
        </div>
        <p class="results-counter" id="resultsCount" role="status" aria-live="polite">Showing all case studies</p>
      </div>
    </div>
  </section>

  <!-- Grid -->
  <section class="case-studies-section" aria-labelledby="gridHeading">
    <div class="container">
      <h2 id="gridHeading" class="sr-only">Case studies list</h2>
      <div class="case-studies-grid" id="caseStudiesGrid"></div>

      <div class="no-results" id="noResults" hidden>
        <i class="fas fa-search no-results-icon" aria-hidden="true"></i>
        <h3>No case studies found</h3>
        <p>Try adjusting your search terms or browse our categories above.</p>
      </div>

      <nav class="pagination-section" aria-label="Pagination">
        <div class="pagination" id="pagination"></div>
      </nav>
    </div>
  </section>

  <!-- Related -->
  <section class="related-links-section">
    <div class="container">
      <h2 class="section-title">Related links</h2>
      <div class="related-links-grid">
        <article class="related-link-card">
          <div class="link-icon green" aria-hidden="true"><i class="fas fa-graduation-cap"></i></div>
          <h3>Cloud-based machine learning solution in health care</h3>
          <a href="#" class="link-btn" aria-label="Learn more about cloud-based machine learning in health care">Learn more</a>
        </article>
        <article class="related-link-card">
          <div class="link-icon green" aria-hidden="true"><i class="fas fa-cloud-download-alt"></i></div>
          <h3>Self-service reporting in the cloud</h3>
          <a href="#" class="link-btn" aria-label="Learn more about self-service reporting in the cloud">Learn more</a>
        </article>
        <article class="related-link-card">
          <div class="link-icon blue" aria-hidden="true"><i class="fas fa-shield-alt"></i></div>
          <h3>Insurance company invests boldly in transformation</h3>
          <a href="#" class="link-btn" aria-label="Learn more about insurance transformation">Learn more</a>
        </article>
        <article class="related-link-card">
          <div class="link-icon blue" aria-hidden="true"><i class="fas fa-shopping-cart"></i></div>
          <h3>Cloud steps in for a national retail organization</h3>
          <a href="#" class="link-btn" aria-label="Learn more about retail cloud initiatives">Learn more</a>
        </article>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section class="contact-section">
    <div class="container">
      <div class="contact-content">
        <div class="contact-graphic" aria-hidden="true"><div class="contact-visual"></div></div>
        <div class="contact-info">
          <h2>Contact our team</h2>
          <p>Learn how <strong>TPD's Cloud Consulting Services</strong> can help you power your purpose.</p>
          <a href="{{ route('contact.show') }}" class="contact-btn">Send us a message</a>
        </div>
      </div>
    </div>
  </section>
</main>

<!-- Modal -->
<div class="modal-overlay" id="caseStudyModal" aria-hidden="true" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
  <div class="modal-container" role="document" tabindex="-1">
    <button class="modal-close" id="modalClose" type="button" aria-label="Close modal"><i class="fas fa-times"></i></button>

    <div class="modal-header">
      <img src="" alt="" class="modal-header-image" id="modalImage" width="1200" height="560" loading="eager">
      <div class="modal-header-overlay">
        <h2 class="modal-title" id="modalTitle"></h2>
        <div class="modal-categories" id="modalCategories" role="list"></div>
        <div class="modal-meta">
          <div class="modal-meta-item"><i class="fas fa-calendar-alt" aria-hidden="true"></i><span id="modalDate">Project Timeline</span></div>
          <div class="modal-meta-item"><i class="fas fa-user-tie" aria-hidden="true"></i><span>TPD Solutions</span></div>
        </div>
      </div>
    </div>

    <div class="modal-content" id="modalContent">
      <div class="modal-section"><p class="modal-description" id="modalDescription"></p></div>

      <div class="modal-section">
        <div class="challenge-solution-grid">
          <section class="challenge-box" aria-labelledby="challengeTitle">
            <div class="box-title"><i class="fas fa-exclamation-triangle box-icon" aria-hidden="true"></i><span id="challengeTitle">Challenge</span></div>
            <div class="box-content" id="modalChallenge">—</div>
          </section>
          <section class="solution-box" aria-labelledby="solutionTitle">
            <div class="box-title"><i class="fas fa-lightbulb box-icon" aria-hidden="true"></i><span id="solutionTitle">Solution</span></div>
            <div class="box-content" id="modalSolution">—</div>
          </section>
        </div>
      </div>

      <div class="modal-section">
        <h3 class="modal-section-title">Technologies Used</h3>
        <div class="tech-grid" id="modalTechnologies"></div>
      </div>

      <div class="modal-section">
        <h3 class="modal-section-title">Project Timeline</h3>
        <div class="timeline" id="modalTimeline"></div>
      </div>

      <div class="modal-section">
        <h3 class="modal-section-title">Results &amp; Impact</h3>
        <div class="modal-section-content" id="modalResults">—</div>
        <div class="results-grid" id="modalMetrics"></div>
      </div>
    </div>

    <div class="modal-footer">
      <div class="modal-actions">
        <a href="{{ route('contact.show') }}" class="modal-btn modal-btn-primary" id="modalContact"><i class="fas fa-envelope" aria-hidden="true"></i>Contact Us</a>
        <button class="modal-btn modal-btn-secondary" id="modalDownload" type="button"><i class="fas fa-download" aria-hidden="true"></i>Download PDF</button>
      </div>
      <div class="modal-info">Case Study • TPD Solutions</div>
    </div>
  </div>
</div>

@include('layout.footer')

<!-- 1) Expose Blade values to JS safely -->
<script>
  window.ASSET_BASE = "{{ rtrim(asset(''), '/') }}/";
  window.YEAR = "{{ date('Y') }}";
  window.CASE_STUDIES = {!! json_encode($caseStudiesData) !!};
</script>

<!-- 2) All app JS protected from Blade -->
@verbatim
<script defer>
  // helper to build asset paths
  const ASSET = (p) => (window.ASSET_BASE || '/') + p;

  /* --------------- Modal class --------------- */
  class CaseStudyModal{
    constructor(){
      this.modal=document.getElementById('caseStudyModal');
      this.container=this.modal.querySelector('.modal-container');
      this.closeBtn=document.getElementById('modalClose');
      this.current=null; this.isOpen=false; this.lastFocus=null;
      this.boundKey=this.onKey.bind(this);
      this.init();
    }
    init(){
      this.closeBtn.addEventListener('click',()=>this.close());
      this.modal.addEventListener('click',e=>{ if(e.target===this.modal) this.close(); });
      document.getElementById('modalDownload').addEventListener('click',e=>{
        e.preventDefault(); if(this.current) this.downloadPDF(this.current);
      });
    }
    onKey(e){
      if(e.key==='Escape'){ this.close(); return; }
      if(e.key==='Tab'){
        const f=this.container.querySelectorAll('a[href],button:not([disabled]),textarea,input,select,[tabindex]:not([tabindex="-1"])');
        if(!f.length) return;
        const first=f[0], last=f[f.length-1];
        if(e.shiftKey && document.activeElement===first){ last.focus(); e.preventDefault(); }
        else if(!e.shiftKey && document.activeElement===last){ first.focus(); e.preventDefault(); }
      }
    }
    open(id){
      const cs=CASE_STUDIES.find(x=>x.id===id); if(!cs) return;
      this.current=cs; this.populate(cs);
      this.lastFocus=document.activeElement;
      document.getElementById('mainContent').setAttribute('aria-hidden','true');
      this.modal.removeAttribute('aria-hidden');
      this.modal.classList.add('active');
      this.isOpen=true; this.closeBtn.focus();
      document.addEventListener('keydown',this.boundKey);
    }
    close(){
      this.modal.classList.remove('active');
      this.modal.setAttribute('aria-hidden','true');
      document.getElementById('mainContent').removeAttribute('aria-hidden');
      this.isOpen=false; document.removeEventListener('keydown',this.boundKey);
      if(this.lastFocus) this.lastFocus.focus();
    }
    populate(cs){
      document.getElementById('modalTitle').textContent=cs.title;
      document.getElementById('modalDescription').textContent=cs.description;
      const img=document.getElementById('modalImage'); img.src=cs.image; img.alt=cs.title;

      const cats=document.getElementById('modalCategories'); cats.innerHTML='';
      cs.categories.forEach(c=>{ const s=document.createElement('span'); s.className='modal-category-tag'; s.textContent=c; cats.appendChild(s); });

      document.getElementById('modalChallenge').textContent=cs.challenge || "This project presented unique technical and business challenges that required innovative solutions.";
      document.getElementById('modalSolution').textContent =cs.solution  || "We applied best practices and proven architectures to meet performance, security and cost goals.";
      document.getElementById('modalResults').textContent  =cs.results   || "Delivered measurable improvements across multiple KPIs.";

      this.fill('modalTechnologies',
        (cs.technologies && cs.technologies.length ? cs.technologies : [{name:"AWS",icon:"fab fa-aws"},{name:"Docker",icon:"fab fa-docker"},{name:"Terraform",icon:"fas fa-code-branch"},{name:"CloudWatch",icon:"fas fa-chart-line"}])
          .map(t=>`<div class="tech-item"><i class="${t.icon} tech-icon" aria-hidden="true"></i><span class="tech-name">${t.name}</span></div>`));

      this.fill('modalTimeline',
        (cs.timeline && cs.timeline.length ? cs.timeline : [
          {date:"Phase 1",title:"Discovery & Planning",description:"Analysis and roadmap."},
          {date:"Phase 2",title:"Implementation",description:"Core build & deploy."},
          {date:"Phase 3",title:"Testing & Launch",description:"QA and go-live."}
        ]).map(i=>`<div class="timeline-item"><div class="timeline-date">${i.date}</div><div class="timeline-title">${i.title}</div><div class="timeline-description">${i.description}</div></div>`));

      this.fill('modalMetrics',
        (cs.metrics && cs.metrics.length ? cs.metrics : [{number:"100%",label:"Success"},{number:"50%",label:"Improvement"},{number:"24/7",label:"Support"}])
          .map(m=>`<div class="result-item"><span class="result-number">${m.number}</span><span class="result-label">${m.label}</span></div>`));
    }
    fill(id, html){ const el=document.getElementById(id); el.innerHTML=html.join(''); }
    downloadPDF(cs){
      const html = `<!doctype html><html><head><meta charset="utf-8"><title>Case Study - ${cs.title}</title>
      <style>body{font-family:Arial,sans-serif;line-height:1.6;color:#333;max-width:800px;margin:0 auto;padding:20px}
      .header{border-bottom:3px solid #007bff;padding-bottom:20px;margin-bottom:30px;text-align:center}
      .header h1{color:#007bff;margin:0;font-size:28px}.title{font-size:20px;font-weight:700;margin:30px 0 20px;text-align:center}
      .section{margin:24px 0}.section-title{color:#007bff;font-size:18px;font-weight:700;margin-bottom:8px;border-left:4px solid #007bff;padding-left:12px}
      .content{text-align:justify;line-height:1.8;font-size:14px;margin-left:18px}.category{display:inline-block;background:#f8f9fa;color:#495057;padding:5px 12px;margin:0 4px;border-radius:20px;font-size:12px;font-weight:700}
      .footer{margin-top:36px;padding-top:16px;border-top:2px solid #eee;font-size:12px;color:#666;text-align:center}</style></head>
      <body>
        <div class="header"><h1>CASE STUDY</h1><div>TPD Solutions • Technophiles Den</div></div>
        <div class="title">${cs.title}</div>
        <div style="text-align:center;margin:12px 0;">${cs.categories.map(c=>`<span class="category">${c}</span>`).join('')}</div>
        <div class="section"><div class="section-title">Project Overview</div><div class="content">${cs.description}</div></div>
        <div class="section"><div class="section-title">Challenge</div><div class="content">${cs.challenge || '—'}</div></div>
        <div class="section"><div class="section-title">Solution</div><div class="content">${cs.solution || '—'}</div></div>
        <div class="section"><div class="section-title">Results & Impact</div><div class="content">${cs.results || '—'}</div></div>
        <div class="footer"><p><strong>© ${window.YEAR} TPD Solutions - Technophiles Den</strong></p><p>Generated on: ${new Date().toLocaleDateString()}</p></div>
      </body></html>`;
      const w=window.open('','_blank','width=900,height=700'); w.document.write(html); w.document.close();
      w.onload=()=>setTimeout(()=>w.print(),250);
    }
  }
  const modal = new CaseStudyModal();

  /* ----------- App state & rendering ----------- */
  let currentPage=1, currentFilter='all', searchTerm='';
  const itemsPerPage=9;
  const elGrid=document.getElementById('caseStudiesGrid');
  const elPagination=document.getElementById('pagination');
  const elResults=document.getElementById('resultsCount');
  const elNoResults=document.getElementById('noResults');
  const elSearch=document.getElementById('caseStudySearch');
  const elClear=document.getElementById('clearSearch');
  const filterButtons=[...document.querySelectorAll('.filter-btn')];

  document.addEventListener('DOMContentLoaded',()=>{
    setupEvents(); render();
    const hashId=parseInt(location.hash.replace('#',''),10);
    if(hashId && CASE_STUDIES.some(s=>s.id===hashId)){ modal.open(hashId); }
  });

  function setupEvents(){
    let t; elSearch.addEventListener('input', e=>{
      clearTimeout(t); t=setTimeout(()=>{
        searchTerm=e.target.value.trim();
        elClear.hidden=!searchTerm;
        currentPage=1; render();
      },150);
    });
    elClear.addEventListener('click', ()=>{
      elSearch.value=''; searchTerm=''; elClear.hidden=true; currentPage=1; render(); elSearch.focus();
    });
    filterButtons.forEach(btn=>{
      btn.addEventListener('click', ()=>{
        filterButtons.forEach(b=>{ b.classList.remove('active'); b.setAttribute('aria-selected','false'); });
        btn.classList.add('active'); btn.setAttribute('aria-selected','true');
        currentFilter=btn.dataset.filter; currentPage=1; render();
      });
    });
    document.addEventListener('keydown', e=>{
      if((e.ctrlKey||e.metaKey) && e.key==='k'){ e.preventDefault(); elSearch.focus(); }
      if(e.key==='Escape' && searchTerm){ elClear.click(); }
    });
  }

  function filtered(){
    let list=CASE_STUDIES.slice();
    if(currentFilter!=='all') list=list.filter(s=>s.categories.includes(currentFilter));
    if(searchTerm){
      const q=searchTerm.toLowerCase();
      list=list.filter(s=>(`${s.title} ${s.description} ${s.searchKeywords||''}`).toLowerCase().includes(q));
    }
    return list;
  }

  function render(){
    const all=filtered();
    const start=(currentPage-1)*itemsPerPage, pageItems=all.slice(start,start+itemsPerPage);

    elGrid.innerHTML='';
    if(!all.length){ elNoResults.hidden=false; elGrid.style.display='none'; }
    else{
      elNoResults.hidden=true; elGrid.style.display='grid';
      pageItems.forEach((s,i)=> elGrid.appendChild(card(s,i)));
    }
    updateResults(all.length); paginate(all.length);
  }

  function card(study,i){
    const div=document.createElement('article');
    div.className='case-study-card'; div.setAttribute('aria-labelledby',`title-${study.id}`);
    div.innerHTML=`
      <div class="card-image">
        <img loading="lazy" src="${study.image}" alt="${study.title}" class="card-img" width="800" height="480">
      </div>
      <div class="card-content">
        <h3 class="card-title" id="title-${study.id}">${study.title}</h3>
        <p class="card-description">${study.description}</p>
        <div class="card-categories" role="list">
          ${study.categories.map(c=>`<span class="category-tag" role="listitem">${c}</span>`).join('')}
        </div>
        <div class="card-footer">
          <a class="read-more-btn" href="#${study.id}" data-id="${study.id}" aria-label="Read case study: ${study.title}">
            <span>Read Case Study</span><i class="fas fa-arrow-right" aria-hidden="true"></i>
          </a>
        </div>
      </div>`;
    div.querySelector('.read-more-btn').addEventListener('click', e=>{
      e.preventDefault(); history.replaceState(null,'',`#${study.id}`); modal.open(study.id);
    });
    setTimeout(()=>div.classList.add('animate-in'), i*80);
    return div;
  }

  function updateResults(n){
    if(searchTerm && currentFilter!=='all'){ elResults.textContent=`Showing ${n} results for "${searchTerm}" in ${currentFilter}`; }
    else if(searchTerm){ elResults.textContent=`Showing ${n} results for "${searchTerm}"`; }
    else if(currentFilter!=='all'){ elResults.textContent=`Showing ${n} ${currentFilter} case studies`; }
    else { elResults.textContent=`Showing all ${n} case studies`; }
  }

  function paginate(total){
    elPagination.innerHTML=''; const pages=Math.ceil(total/itemsPerPage); if(pages<=1) return;
    const addBtn=(label,cls,fn,disabled=false)=>{ const b=document.createElement('button'); b.className=`pagination-btn ${cls||''}`; b.innerHTML=label; b.disabled=!!disabled; b.addEventListener('click',fn); elPagination.appendChild(b); };
    addBtn('<i class="fas fa-chevron-left"></i> Prev','prev',()=>{ if(currentPage>1){ currentPage--; render(); document.querySelector('.case-studies-section').scrollIntoView({behavior:'smooth',block:'start'}); } }, currentPage===1);

    const start=Math.max(1,currentPage-2), end=Math.min(pages,currentPage+2);
    if(start>1){ addBtn('1','',()=>{ currentPage=1; render(); }); if(start>2){ const s=document.createElement('span'); s.className='pagination-ellipsis'; s.textContent='…'; elPagination.appendChild(s);} }
    for(let i=start;i<=end;i++){ addBtn(String(i), i===currentPage?'active':'', ()=>{ currentPage=i; render(); }); }
    if(end<pages){ if(end<pages-1){ const s=document.createElement('span'); s.className='pagination-ellipsis'; s.textContent='…'; elPagination.appendChild(s);} addBtn(String(pages),'',()=>{ currentPage=pages; render(); }); }

    addBtn('Next <i class="fas fa-chevron-right"></i>','next',()=>{ if(currentPage<pages){ currentPage++; render(); document.querySelector('.case-studies-section').scrollIntoView({behavior:'smooth',block:'start'}); } }, currentPage===pages);
  }

  /* Smooth internal anchors */
  document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener('click', e=>{
      const id=a.getAttribute('href'); if(id==='#') return;
      const t=document.querySelector(id);
      if(t){ e.preventDefault(); t.scrollIntoView({behavior:'smooth',block:'start'}); }
    });
  });
</script>
@endverbatim
</body>
</html>
