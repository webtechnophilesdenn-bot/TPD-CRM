(self.modernJsonp=self.modernJsonp||[]).push([["2944"],{608747:function(e,a,l){var t,r;l.r(a),l.d(a,{default:()=>n});let o={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"boardId"}],kind:"Fragment",metadata:null,name:"collab_AcceptInvite_Mutation",selections:r=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3AcceptBoardCollaboratorInviteMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"collab_AcceptInvite_Mutation",selections:r},params:{id:"781c41132fefa007ebde7bcd8c49840ce1768ed6f6781fd72e3904bd35fb576f",metadata:{},name:"collab_AcceptInvite_Mutation",operationKind:"mutation",text:null}};o.hash="7005ce437a6a6ff33741ab44aa02cf61";let n=o},479699:function(e,a,l){var t,r;l.r(a),l.d(a,{default:()=>n});let o={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"userId"}],kind:"Fragment",metadata:null,name:"collab_ApproveInvite_Mutation",selections:r=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"user",variableName:"userId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3ApproveBoardCollaboratorInviteMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"collab_ApproveInvite_Mutation",selections:r},params:{id:"472a584df4a467181ed32ec33d235ef2f2e6d53fdb4c7a43d11156b6d51dcd50",metadata:{},name:"collab_ApproveInvite_Mutation",operationKind:"mutation",text:null}};o.hash="40ae8061007ba5f53a4570e43e4ca864";let n=o},296485:function(e,a,l){var t,r,o,n;l.r(a),l.d(a,{default:()=>s});let i={fragment:{argumentDefinitions:[t={defaultValue:null,kind:"LocalArgument",name:"ban"},r={defaultValue:null,kind:"LocalArgument",name:"boardId"},o={defaultValue:null,kind:"LocalArgument",name:"userId"}],kind:"Fragment",metadata:null,name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",selections:n=[{alias:null,args:[{fields:[{kind:"Variable",name:"ban",variableName:"ban"},{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"user",variableName:"userId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3DeclineOrDeleteBoardCollaboratorInviteMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[r,o,t],kind:"Operation",name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",selections:n},params:{id:"ff3059743c1d13d4f1c2ef07e10d2b29925c7b330db4103e55e9e65c380c0ce5",metadata:{},name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",operationKind:"mutation",text:null}};i.hash="c62e5df78917dd238b70f366f358d487";let s=i},579965:function(e,a,l){var t,r,o,n,i,s,d,c;l.r(a),l.d(a,{default:()=>h});let u={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"board"},{defaultValue:null,kind:"LocalArgument",name:"collaboratorIds"}],kind:"Fragment",metadata:null,name:"collab_RemoveBoardCollaborators_Mutation",selections:[{alias:null,args:r=[{fields:[{kind:"Variable",name:"board",variableName:"board"},{kind:"Variable",name:"collaboratorIds",variableName:"collaboratorIds"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3RemoveBoardCollaboratorsMutation",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"data",plural:!1,selections:[n={alias:null,args:null,kind:"ScalarField",name:"collaboratorCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[o,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null}],storageKey:null}],type:"V3RemoveBoardCollaborators",abstractKey:null},d={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"collab_RemoveBoardCollaborators_Mutation",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"v3RemoveBoardCollaboratorsMutation",plural:!1,selections:[o,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"data",plural:!1,selections:[n,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[o,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:[i,s,c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null},c],storageKey:null}],type:"V3RemoveBoardCollaborators",abstractKey:null},d],storageKey:null}]},params:{id:"83dd1206102cffdd460f8c072df0ca515d27c8fcf3798423f1657afabdf467ac",metadata:{},name:"collab_RemoveBoardCollaborators_Mutation",operationKind:"mutation",text:null}};u.hash="2c3e1508650962adfff1171e950fa419";let h=u},336997:function(e,a,l){var t,r,o,n,i,s,d,c,u,h;l.r(a),l.d(a,{default:()=>_});let m=(t=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"message"}],r=[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],o={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i=[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],s={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},u={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"},h=[n,c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],{fragment:{argumentDefinitions:t,kind:"Fragment",metadata:null,name:"collab_RequestToJoin_Mutation",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"v3CreateRequestToJoinBoardMutation",plural:!1,selections:[o,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedByUser",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedUser",plural:!1,selections:i,storageKey:null},s,d,c,{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:i,storageKey:null}],storageKey:null}],type:"CollaboratorInviteResponse",abstractKey:null},u],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"collab_RequestToJoin_Mutation",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"v3CreateRequestToJoinBoardMutation",plural:!1,selections:[o,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedByUser",plural:!1,selections:h,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedUser",plural:!1,selections:h,storageKey:null},s,d,c,{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:h,storageKey:null}],storageKey:null}],type:"CollaboratorInviteResponse",abstractKey:null},u],storageKey:null}]},params:{id:"ff45f353c3246c417487b54a02f0669dbc6c45761df9567395537bf1f7875a9f",metadata:{},name:"collab_RequestToJoin_Mutation",operationKind:"mutation",text:null}});m.hash="9aa22a7713214239538142ad2c957cc3";let _=m},868455:function(e,a,l){var t,r;l.r(a),l.d(a,{default:()=>n});let o={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"emails"},{defaultValue:null,kind:"LocalArgument",name:"message"}],kind:"Fragment",metadata:null,name:"collab_emails_Mutation",selections:r=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"emails",variableName:"emails"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorEmailMutationv2",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"collab_emails_Mutation",selections:r},params:{id:"b71dbcb22ec2462fa0cde080403e4f9001df6f822511fd94b0fb3eae0c6b3fd4",metadata:{},name:"collab_emails_Mutation",operationKind:"mutation",text:null}};o.hash="de392a939a95d05f7ee889fe77a9e52d";let n=o},800679:function(e,a,l){var t,r,o,n;l.r(a),l.d(a,{default:()=>s});let i={fragment:{argumentDefinitions:[t={defaultValue:null,kind:"LocalArgument",name:"boardId"},r={defaultValue:null,kind:"LocalArgument",name:"collaboratorIds"},o={defaultValue:null,kind:"LocalArgument",name:"message"}],kind:"Fragment",metadata:null,name:"collab_users_Mutation",selections:n=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"collaboratorIds",variableName:"collaboratorIds"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorsMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[r,t,o],kind:"Operation",name:"collab_users_Mutation",selections:n},params:{id:"42ceaa3423a096a27613e5738f83aaadcee449c55d4dd03624d2f08a6b6dca04",metadata:{},name:"collab_users_Mutation",operationKind:"mutation",text:null}};i.hash="850c5de9834cac0edfdd5652a78bffbf";let s=i},10594:function(e,a,l){l.d(a,{Z:()=>t});let t=e=>({isAnalyticsSite:4===e,isSterlingSite:3===e,isWwwSite:0===e,isTrendsSite:7===e,isPlanningHub:12===e})},10423:function(e,a,l){l.d(a,{Z:()=>o});let t=function(e,a){this.uid=e,this.item=a,this.next=null,this.prev=null},r=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};r.prototype.set=function(e,a){let l=this._uidToData[e];l||(l=new t(e,a),this._uidToData[e]=l,this._numItems+=1),this._moveToFront(l),this._numItems>this._maxNumItems&&this._evict()},r.prototype.get=function(e){let a=this._uidToData[e];return a?(this._moveToFront(a),a.item):null},r.prototype.remove=function(e){let a=this._uidToData[e];a&&(delete this._uidToData[e],this._firstData===a&&(this._firstData=a.next),this._lastData===a&&(this._lastData=a.prev),a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),this._numItems-=1)},r.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},r.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};let o=r},10972:function(e,a,l){l.d(a,{Z:()=>o});var t=l(667294),r=l(490193);function o({allowSearchOnMount:e,children:a,onTypeaheadSuggestionsChange:l,resourceName:o,resourceOptions:n,value:i}){let s=(0,r.Z)({allowSearchOnMount:e,resourceName:o,resourceOptions:n,value:i});return(0,t.useEffect)(()=>{s?.length&&l(s)},[s]),a||null}},490193:function(e,a,l){l.d(a,{Z:()=>n});var t=l(667294),r=l(10423),o=l(791948);function n({allowSearchOnMount:e=!1,resourceName:a,resourceOptions:l={},value:n}){let i=(0,t.useRef)(!1),s=(0,t.useRef)({}),[d,c]=(0,t.useState)([]),u=function({resourceName:e,resourceOptions:a}){let l=(0,o.vL)(),n=(0,t.useRef)(void 0);return n.current||(n.current=function({resourceCreator:e,resourceName:a,resourceOptions:l}){let t=e(a,{...l,count:"count"in l?l.count:5}),o=new r.Z,n=()=>{t.abort()},i=async(e,a)=>{if(t.isCalling()){let l=t.options?.term,r=t.options?.pin_scope;if(e===l&&a===r)return;n()}let{bookmarks:l,...r}=t.options||{};t.options={...r,term:e,pin_scope:a};let{data:i}=(await t.callGet({showError:!1})).resource_response,s=i?.items,d=i?.hint||{};return o.set(`${a}-${e}`,{hint:d,items:s}),{term:e,items:s,hint:d}};return async function(e,a){let l=o.get(`${a}-${e}`);if(l){let{items:a}=l;if(a&&a.length){n();let{hint:t}=l;return{hint:t,items:a,term:e}}}return e.length>=0?i(e,a):{hint:{},items:[],term:e}}}({resourceCreator:l,resourceName:e,resourceOptions:a})),n.current}({resourceName:a,resourceOptions:l}),h=l.pin_scope||"pins",m=`${h}-${n}`;return(0,t.useEffect)(()=>{(async()=>{if(null!=n&&""!==n&&(e||i.current))if(m in s.current)c(s.current[m]);else try{let e=await u(n,h);if(e){let{items:a}=e;s.current[m]=a,c(a)}}catch(e){if("Resource call aborted"===e)return;throw e}i.current||(i.current=!0)})()},[n,h,m]),d}},968842:function(e,a,l){l.d(a,{Z:()=>o});var t=l(647709),r=l(183152);function o(){return function({deviceType:e,site:a}){switch(a){case"analytics":return 4;case"business":return 6;case"planninghub-internal":return 12;case"sterling":return 3;case"trends":return 7;case"trends-internal":return 8;case"commerce-app":case"commerce-app-latest":case"pintergration":return 10;case"creators":case"create":return 11;case"newsroom":return 13;case"about":return 14;case"pinnacle-internal":return 17;default:return+("phone"===e||"tablet"===e)}}({deviceType:(0,t.ZP)(),site:(0,r.uo)()})}},277454:function(e,a,l){l.d(a,{Z:()=>r});let t=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,r=e=>t.test(e)},742723:function(e,a,l){l.d(a,{Z:()=>c,l:()=>d});var t=l(667294),r=l(10594),o=l(15667),n=l(968842),i=l(821651),s=l(448505);let d=(0,t.createContext)(void 0),c=function(){let{advertiser:e}=(0,o.B)(),a=function(){let{isSterlingSite:e}=(0,r.Z)((0,n.Z)());return(0,t.useContext)(d)??e}(),l=(0,s.Z)(),c=((0,i.W)()?.profiles||[]).find(a=>a?.id===e?.owner_user_id);return a&&c||l}},947810:function(e,a,l){l.d(a,{Z:()=>n});var t=l(821342),r=l(448505),o=l(7872);let n=()=>{let e=(0,t.Z)(),a=(0,r.Z)();return(0,o.lJ)(e,a)}},789302:function(e,a,l){l.d(a,{Z:()=>v});var t=l(281098),r=l(667294),o=l(581722),n=l(20256),i=l(918920),s=l(821342),d=l(19585),c=l(675973),u=l(742723),h=l(7872),m=l(931267),_=l(415602),b=l(890774),g=l(785893);function p(e,a,l){var t;return(a="symbol"==typeof(t=function(e,a){if("object"!=typeof e||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var t=l.call(e,a||"default");if("object"!=typeof t)return t;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(a,"string"))?t:t+"")in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}class f extends r.Component{constructor(...e){super(...e),p(this,"handleSubmit",e=>{let{advertiserId:a,boardCreateSource:l,createBoard:t,onBoardCreate:r,viewer:o,orbacActingAs:n,shouldShowAddCollaborators:i,handleInviteSelectedCollaborators:s}=this.props,d=(0,h.lJ)(o,n),{name:c,description:u,privacy:m,collab_board_email:_,collaborator_invites_enabled:b}=e;return t({boardCreateOptions:{name:c,description:u,privacy:m,collab_board_email:_,collaborator_invites_enabled:b,aux_data:{source:l},...a?{advertiser_id:a}:{},...d?{orbac_subject_id:d}:Object.freeze({})}}).then(e=>{i&&s(e.id),r(e)})}),p(this,"emptyBoardData",{collab_board_email:!0,collaborator_invites_enabled:!1,id:"",is_collaborative:!1,name:this.props.suggestedBoardName||"",description:"",category:"other",owner:{username:(0,h.Ms)(this.props.viewer,this.props.orbacActingAs)},pin_count:0})}render(){let{advertiserId:e,isAdAccountOwner:a,i18n:l,onClose:t,privacy:r,useModalWithNoLayer:o,showSecretBoardCreateToggle:s,shouldShowAddCollaborators:d,setSelectedContacts:c,selectedContacts:u,shouldUseOverlayPanel:_,orbacActingAs:b,viewer:p}=this.props,f=(0,h.lJ)(p,b),v=l._('Create board', 'BoardCreate.BoardCreate', 'Modal heading');return(0,g.jsx)(m.Z,{board:{...this.emptyBoardData,...{privacy:a?r:i.ZP.BoardPrivacy.PROTECTED}},currentUserIsOwner:!0,isAdAccount:!!e,isAdAccountOwner:a,isDeletable:!1,isEditable:!0,isNameAndSecretView:!0,isProfilePublisher:!!f,onClose:t,onSubmit:this.handleSubmit,overlayPanelHeadingText:v,selectedContacts:u,setSelectedContacts:c,shouldShowAddCollaborators:d,shouldUseOverlayPanel:_,showSecretBoardCreateToggle:s,submitText:this.props.i18n._('Create', ' - ', ' -- '),title:(0,g.jsx)(n.xu,{paddingY:8,width:"100%",children:(0,g.jsx)(n.X6,{align:"center",size:"600",children:v})}),useModalWithNoLayer:o})}}function v(e){(0,r.useEffect)(()=>{(0,t.Z)("BoardCreate","/app/www/BoardCreate/BoardCreate.tsx")},[]);let a=(0,b.Z)(),l=(0,d.ZP)(),{checkExperiment:n}=(0,c.Z)(),i=(0,s.Z)(),h=(0,o.v9)(({advertiser:e})=>e?e.id:void 0),m=(0,u.Z)(),p=(0,o.v9)(({advertiser:e})=>!e||i.isAuth&&e.owner_user_id===i.id),v=(0,_.zC)(),y=(0,_.DK)(),[x,C]=(0,r.useState)([]);return(0,g.jsx)(f,{...e,advertiserId:h,createBoard:a,dispatch:(0,o.I0)(),handleInviteSelectedCollaborators:e=>{let a=x.filter(e=>"email"===e.type||"email_share_suggestion"===e.type),l=x.filter(e=>"user"===e.type||"user_share_suggestion"===e.type);l.length>0&&y(e,l.map(e=>e.id)),a.length>0&&v(e,a.map(e=>e.id))},i18n:l,isAdAccountOwner:p,orbacActingAs:m,selectedContacts:x,setSelectedContacts:C,shouldUseOverlayPanel:n("web_board_create_overlay_panel").anyEnabled,viewer:i})}p(f,"defaultProps",{privacy:i.ZP.BoardPrivacy.PUBLIC})},931267:function(e,a,l){l.d(a,{Z:()=>Q});var t=l(281098),r=l(667294),o=l(20256),n=l(918920),i=l(657043),s=l(982166),d=l(678213),c=l(19585),u=l(302148),h=l(675973),m=l(15667),_=l(782259),b=l(473728),g=l(87853),p=l(647709),f=l(640924),v=l(271597),y=l(744862),x=l(821342),C=l(886981),k=l(10972),B=l(277454),F=l(785893);function P({selectedContacts:e=[],setSelectedContacts:a}){(0,r.useEffect)(()=>{(0,t.Z)("BoardCreateAddCollaborators","/app/www/BoardCreate/BoardCreateAddCollaborators.tsx")},[]);let l=(0,c.ZP)(),n=(0,x.Z)(),i=n.isAuth?n?.avatar_color_index:void 0,{data:s}=(0,C.Z)({name:"ShareSuggestionsResource",options:{field_set_key:"default",hide_group_conversations:!0},noCache:!0}),[d,u]=(0,r.useState)([]);(0,r.useEffect)(()=>{s&&u(s.map(e=>"email_share_suggestion"===e.type?{...e,id:e.email||""}:e))},[s]);let[h,m]=(0,r.useState)(""),_=e.map(e=>e.id),b=[...e,(0,B.Z)(h)&&!_.includes(h)?{id:h,type:"email"}:null,...d.filter(e=>!_.includes(e.id))].filter(Boolean);return(0,F.jsxs)(o.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[(0,F.jsx)(o.xu,{paddingY:2,children:(0,F.jsx)(o.xv,{size:"100",children:l._('Add collaborators', 'text indicates that this section is for adding collaborators to a board', 'boardCreate.addCollaborators.heading')})}),(0,F.jsx)(o.xu,{marginBottom:4,marginTop:2,width:"100%",children:(0,F.jsx)(o.xu,{children:(0,F.jsx)(k.Z,{onTypeaheadSuggestionsChange:e=>{u(e)},resourceName:"ShareSuggestionsTypeaheadResource",value:h,children:(0,F.jsx)(o.Um,{accessibilityLabel:l._('Search for collaborators by name or email', 'users can search for other people and add them as collaborators to a board', 'boardCreate.searchBar.accessibilityLabel'),id:"CollaboratorInviteSearchField",onChange:({value:e})=>{m(e)},placeholder:l._('Search by name or email', 'text in search field to indicate that users could search for other users here', 'boadCreate.searchBar.placeHolder'),size:"lg",value:h})})})}),(0,F.jsx)(o.xu,{children:b.map(t=>(0,F.jsxs)(o.xu,{display:"flex",paddingY:2,children:[(0,F.jsxs)(o.kC,{flex:"grow",children:["email"===t.type||"email_share_suggestion"===t.type?(0,F.jsx)(o.xu,{alignItems:"center",color:"secondary",display:"flex",flex:"none",height:48,justifyContent:"center",marginEnd:3,rounding:"circle",width:48,children:(0,F.jsx)(o.JO,{accessibilityLabel:l._('Email icon', 'Email icon on board create modal', 'boardCreate.emailIcon'),color:"default",icon:"envelope",size:24})}):(0,F.jsx)(o.xu,{display:"flex",flex:"none",height:48,marginEnd:3,width:48,children:(0,F.jsx)(y.qE,{color:i,name:t.full_name||"",size:"fit",src:t.image_medium_url||t.image_large_url})}),"email"===t.type||"email_share_suggestion"===t.type?(0,F.jsx)(o.kC,{alignItems:"center",children:(0,F.jsx)(o.xu,{children:(0,F.jsx)(o.xv,{size:"300",children:t.id})})}):(0,F.jsxs)(o.kC,{direction:"column",justifyContent:"center",children:[(0,F.jsx)(o.xu,{marginBottom:1,tabIndex:0,children:(0,F.jsx)(o.xv,{lineClamp:1,size:"300",children:t.full_name})}),(0,F.jsx)(o.xu,{tabIndex:0,children:(0,F.jsx)(o.xv,{size:"200",children:`@${t.username||""}`})})]})]}),(0,F.jsx)(o.kC,{flex:"none",children:(0,F.jsx)(o.zx,{onClick:()=>{_.includes(t.id)?a?.((e||[]).filter(e=>e.id!==t.id)):a?.([...e,t])},selected:_.includes(t.id),size:"lg",text:_.includes(t.id)?l._('Added', 'Text that lets the user know they have added the contact', 'boardCreate.addedContactButton'):l._('Add', 'Text that lets the user know they can add that contact', 'boardCreate.addContactButton')})})]},t.id))})]})}var j=l(476482),A=l(509120);let w=({label:e,labelId:a})=>a?(0,F.jsx)(o.__,{htmlFor:a,children:(0,F.jsx)(o.xv,{size:"100",children:e})}):(0,F.jsx)(r.Fragment,{children:e});function E(e){(0,r.useEffect)(()=>{(0,t.Z)("BoardFormRow","/app/www/BoardForm/BoardFormRow.tsx")},[]);let{children:a,label:l,labelId:n}=e;return(0,F.jsxs)(r.Fragment,{children:[(0,F.jsx)(o.xu,{marginBottom:2,children:(0,F.jsx)(w,{label:l,labelId:n})}),a]})}function I({coverPin:e,handleShowBoardCoverEditModal:a}){(0,r.useEffect)(()=>{(0,t.Z)("BoardFormBoardCoverButton","/app/www/BoardForm/BoardFormBoardCoverButton.tsx")},[]);let l=(0,c.ZP)(),[n,i]=(0,r.useState)(!1),{isRTL:s}=(0,m.B)();return(0,F.jsx)(E,{label:(0,F.jsx)(o.X6,{accessibilityLevel:3,size:"100",children:(0,F.jsx)(o.xv,{inline:!0,size:"100",children:l._('Board cover', 'BoardForm.BoardFormCoverButton', 'Form label for updating board cover')})}),children:(0,F.jsx)(o.xu,{position:"relative",width:138,children:(0,F.jsx)(o.iP,{onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onTap:a,rounding:4,children:e?.custom_cover?(0,F.jsxs)(r.Fragment,{children:[(0,F.jsx)(o.zd,{height:138,rounding:4,width:138,children:(0,F.jsx)(A.Z,{alt:e.image_url,color:"gray",customCover:e.custom_cover,height:138,imgPos:function(e){let{crop:a,size:l}=e||{};if(Array.isArray(a)&&Array.isArray(l))return{x:a[0]||0,y:a[1]||0,width:l[0]||0,height:l[1]||0}}(e),imgUrl:e.image_url||"",renderAsImage:!0,width:138})}),(0,F.jsx)(o.xu,{bottom:!0,left:s,padding:2,position:"absolute",right:!s,children:(0,F.jsx)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:n?"white":"rgba(255, 255, 255, 0.8)"}},display:"flex",height:44,justifyContent:"center",rounding:"circle",width:44,children:(0,F.jsx)(o.JO,{accessibilityLabel:l._('Edit board cover', 'BoardForm.BoardFormBoardCoverButton', 'Accessibility label on icon'),color:"default",icon:"edit",size:16})})})]}):(0,F.jsx)(o.xu,{alignItems:"center",color:n?"darkWash":"secondary",display:"flex",height:138,justifyContent:"center",rounding:4,width:138,children:(0,F.jsx)(o.JO,{accessibilityLabel:l._('Add cover photo', 'BoardForm.BoardFormCoverButton', 'Accessibility label on icon'),color:"default",icon:"add",size:24})})})})})}function z({children:e,label:a,labelId:l,subtext:n}){return(0,r.useEffect)(()=>{(0,t.Z)("BoardFormSettingsRow","/app/www/BoardForm/BoardFormSettingsRow.tsx")},[]),(0,F.jsx)(r.Fragment,{children:(0,F.jsxs)(o.xu,{alignItems:"center",display:"flex",justifyContent:"start",marginBottom:10,children:[e,(0,F.jsxs)(o.xu,{marginStart:2,children:[(0,F.jsx)(o.__,{htmlFor:l,children:(0,F.jsx)(o.xv,{size:"300",weight:"bold",children:a})}),n]})]})})}function S({hasCollabBoardEmail:e,isCollaborative:a,onCheckboxChange:l}){(0,r.useEffect)(()=>{(0,t.Z)("BoardFormCollaboratorsEmailCheckbox","/app/www/BoardForm/BoardFormCollaboratorsEmailCheckbox.tsx")},[]);let n=(0,c.ZP)();return a&&(0,F.jsx)(z,{label:n._('Email notifications', 'BoardForm.BoardFormCollaboratorsEmailCheckbox', 'Form label'),labelId:"emailNotificationsCheckbox",subtext:(0,F.jsx)(o.xv,{color:"subtle",size:"300",children:n._('Get an email when someone saves Pins to this board', 'BoardForm.BoardFormCollaboratorsEmailCheckbox', 'Text explaing field on board form')}),children:(0,F.jsx)(o.kC,{alignItems:"center",justifyContent:"start",children:(0,F.jsx)(o.xu,{marginEnd:1,children:(0,F.jsx)(o.XZ,{checked:e,id:"emailNotificationsCheckbox",name:"email",onChange:l})})})})}var T=l(734263),D=l(812577);function L({board:e,onCollaboratorInviteClick:a}){(0,r.useEffect)(()=>{(0,t.Z)("BoardCollaboratorsAndInviteSection","/app/www/boardEdit/BoardCollaboratorsAndInviteSection.tsx")},[]);let l=(0,c.ZP)(),n=(0,D.Z)({boardId:e.id,ownerName:e.owner.full_name??"",ownerUsername:e.owner.username,ownerImgSrc:e.owner.image_medium_url||e.owner.image_small_url||""}),i=n.slice(0,3).map(e=>e.name),s="";switch(n.length){case 3:s=(0,u.Wc)(`${l._('{{ first }}, {{ second }}, and {{ last }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars', 'List of three usernames')}`,{first:`${i[0]}`,second:`${i[1]}`,last:`${i[2]}`});break;case 2:s=(0,u.Wc)(`${l._('{{ first }} and {{ second }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars', 'List of two usernames.')}`,{first:`${i[0]}`,second:`${i[1]}`});break;default:s=i.join(", ")}let d=n.length>3?(0,u.Wc)(l.ngettext('Collaborators: {{ userNames }} and {{ leftCount }} more.', 'Collaborators: {{ userNames }} and {{ leftCount }} more.', n.length - 3, 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree', 'Accessibility label that lists the names of collaborators and a final count of non-displayed avatars'),{userNames:s,leftCount:`${n.length-3}`}):(0,u.Wc)(`${l._('Collaborators: {{ userNames }}.', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree', 'Accessibility label that lists the names of collaborators')}`,{userNames:s});return(0,F.jsxs)(o.kC,{alignItems:"center",justifyContent:"between",children:[(0,F.jsx)(o.HE,{accessibilityLabel:d,collaborators:n.map(({name:e,src:a,color:l})=>({src:a?.endsWith("/default_75.webp")?void 0:a,name:e,color:l})),size:"md"}),(0,F.jsx)(o.hU,{accessibilityLabel:l._('Invite collaborators', 'BoardEdit.BoardCollaboratorsAndInviteSection', 'Accessibility label on button'),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:a,size:"lg"})]})}function K({board:e,onCollaboratorInviteClick:a}){(0,r.useEffect)(()=>{(0,t.Z)("BoardFormCollaboratorsInviteList","/app/www/BoardForm/BoardFormCollaboratorsInviteList.tsx")},[]);let l=(0,c.ZP)(),n=(0,F.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",children:[(0,F.jsx)(o.X6,{accessibilityLevel:3,size:"100",children:(0,F.jsx)(o.xv,{inline:!0,size:"100",children:l._('Collaborators', ' - ', ' -- ')})}),(0,F.jsx)(T.Z,{}),(0,F.jsx)(o.xv,{inline:!0,size:"100",weight:"bold",children:(0,F.jsx)(o.rU,{accessibilityLabel:l._('Learn more about creating and managing group boards.', 'BoardForm.BoardFormCollaboratorsInviteList', 'Accessibility label for link to learn more about group boards'),display:"inlineBlock",href:"https://www.pinterest.com/_/_/help/article/group-boards?source=board_create",target:"blank",underline:"hover",children:l._('Learn more', ' - ', ' -- ')})})]});return(0,F.jsx)(E,{label:n,children:(0,F.jsx)(L,{board:e,onCollaboratorInviteClick:a})})}function Z({collaboratorInvitesEnabled:e,isCollaborative:a,onCheckboxChange:l}){(0,r.useEffect)(()=>{(0,t.Z)("BoardFormCollaboratorsInviteToggle","/app/www/BoardForm/BoardFormCollaboratorsInviteToggle.tsx")},[]);let n=(0,c.ZP)();return a&&(0,F.jsx)(z,{label:n._('Let collaborators add people', 'BoardForm.BoardFormCollaboratorsInviteToggle', 'Form label'),labelId:"collaboratorInvitesEnabledCheckbox",children:(0,F.jsx)(o.XZ,{checked:e,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:l})})}function R({description:e,descriptionValidatorErrors:a,onChange:l}){(0,r.useEffect)(()=>{(0,t.Z)("BoardFormDescription","/app/www/BoardForm/BoardFormDescription.tsx")},[]);let n=(0,c.ZP)(),i="boardEditDescription";return(0,F.jsx)(E,{label:n._('Description', 'BoardForm.BoardFormDescription', ' Form field label'),labelId:i,children:(0,F.jsx)(o.Kx,{errorMessage:a.join(", "),id:i,name:"description",onChange:l,placeholder:n._('What\'s your board about?', ' - ', ' -- '),value:e})})}let M=({children:e})=>((0,r.useEffect)(()=>{(0,t.Z)("BoardFormList","/app/www/BoardForm/BoardFormList.tsx")},[]),(0,F.jsx)(o.xu,{paddingX:8,role:"list",children:r.Children.map(e,(a,l)=>a&&(0,F.jsx)(o.xu,{marginBottom:l===r.Children.count(e)-1?1:8,role:"listitem",children:a},l))}));function O({name:e,nameValidatorErrors:a,onChange:l,disabled:n}){(0,r.useEffect)(()=>{(0,t.Z)("BoardFormTitleInput","/app/www/BoardForm/BoardFormTitleInput.tsx")},[]);let i=(0,c.ZP)();return(0,F.jsx)(E,{label:i._('Name', 'BoardForm.BoardFormTitleInput', 'Form field label'),labelId:"boardEditName",children:(0,F.jsx)(o.nv,{disabled:n,errorMessage:a.join(", "),id:"boardEditName",name:"boardName",onChange:l,placeholder:i._('Like "Places to Go" or "Recipes to Make"', ' - ', ' -- '),size:"lg",value:e})})}let V=({board:e,collabBoardEmail:a,collaboratorInvitesEnabled:l,coverPin:n,currentUserIsOwner:i,description:s,descriptionValidatorErrors:d,handleBoardLeave:u,isCollaborative:h,showCoverEdit:m,name:_,nameValidatorErrors:b,handleShowBoardCoverEditModal:g,handleChangeName:p,handleChangeDescription:f,handleShowCollaboratorsModal:v,handleChangeCollabBoardEmail:y,handleChangeCollaboratorInvitesEnabled:x,shouldShowCollaboratorsInviteToggle:C})=>{(0,r.useEffect)(()=>{(0,t.Z)("AdsOnlyBoardFormFields","/app/www/BoardForm/AdsOnlyBoardFormFields.tsx")},[]);let k=(0,c.ZP)();return(0,F.jsxs)(M,{children:[m&&(0,F.jsx)(I,{coverPin:n,handleShowBoardCoverEditModal:g}),(0,F.jsx)(O,{disabled:!0,name:_,nameValidatorErrors:b,onChange:p}),(0,F.jsx)(R,{description:s,descriptionValidatorErrors:d,onChange:f}),i&&!!u&&(0,F.jsx)(K,{board:e,onCollaboratorInviteClick:v}),h&&(0,F.jsx)(o.xu,{marginBottom:-7,children:(0,F.jsx)(o.xv,{size:"100",children:k._('Settings', 'BoardForm.BoardForm', 'Section heading in board edit form')})}),(0,F.jsx)(S,{hasCollabBoardEmail:a,isCollaborative:h,onCheckboxChange:y}),C&&(0,F.jsx)(Z,{collaboratorInvitesEnabled:l,isCollaborative:h,onCheckboxChange:x})]})};function N({isProtectedToggler:e,isToggleDisable:a,onChange:l,onCheckboxChange:i,privacy:s}){(0,r.useEffect)(()=>{(0,t.Z)("BoardFormPrivacyToggle","/app/www/BoardForm/BoardFormPrivacyToggle.tsx")},[]);let d=(0,c.ZP)();if(!0===e)return(0,F.jsx)(z,{label:d._('Protected board (not listed on user\'s profile)', 'BoardForm.BoardFormSecretToggle', 'protected board'),labelId:"protected",children:(0,F.jsx)(o.xu,{paddingY:2,children:(0,F.jsx)(o.rs,{disabled:a,id:"protected",onChange:l,switched:s===n.ZP.BoardPrivacy.PROTECTED})})});if(s!==n.ZP.BoardPrivacy.PROTECTED){let e=d._('Keep this board secret', 'BoardForm.BoardFormSecretToggle', 'Caption for board settings to set visibility'),l=(0,F.jsx)(r.Fragment,{children:(0,F.jsxs)(o.xv,{color:"subtle",inline:!0,size:"300",children:[d._('So only you and collaborators can see it.', 'BoardForm.BoardFormSecretToggle', 'notifying the board owner only they and the collaborators can see the board if it set to secret')," ",(0,F.jsx)(o.rU,{accessibilityLabel:d._('Learn more about secret boards.', 'BoardForm.BoardFormPrivacyToggle.Link', 'Accessibility label for link to learn more about secret boards'),display:"inline",href:"https://www.pinterest.com/_/_/help/article/change-board-privacy?source=secret_create",target:"blank",children:d._('Learn more', 'BoardForm.BoardFormSecretToggle', 'Link to learn more about secret boards')})]})});return(0,F.jsx)(z,{label:e,labelId:"secret",subtext:l,children:(0,F.jsx)(o.kC,{alignItems:"center",justifyContent:"start",children:(0,F.jsx)(o.XZ,{checked:s===n.ZP.BoardPrivacy.SECRET,disabled:a,id:"secret",name:"secret",onChange:i})})})}return null}function U({allowHomefeedRecommendations:e,onCheckboxChange:a}){(0,r.useEffect)(()=>{(0,t.Z)("BoardFormRecommendationToggle","/app/www/BoardForm/BoardFormRecommendationToggle.tsx")},[]);let l=(0,c.ZP)();return(0,F.jsx)(z,{label:l._('Personalization', 'BoardForm.BoardFormRecommendationToggle', 'form label'),labelId:"recommendation",subtext:(0,F.jsx)(o.xv,{color:"subtle",size:"300",children:l._('Show Pins inspired by this board in your home feed.', 'BoardForm.BoardFormRecommendationToggle', 'Caption for board settings to set visibility')}),children:(0,F.jsx)(o.XZ,{checked:e,id:"recommendation",name:"recommendation",onChange:a})})}function $(e,a,l){var t;return(a="symbol"==typeof(t=function(e,a){if("object"!=typeof e||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var t=l.call(e,a||"default");if("object"!=typeof t)return t;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(a,"string"))?t:t+"")in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}let H=(0,r.lazy)(()=>Promise.all([l.e("25418"),l.e("49153")]).then(l.bind(l,284484))),q=(0,r.lazy)(()=>Promise.all([l.e("29670"),l.e("52626")]).then(l.bind(l,826654))),X=(e,a)=>(0,f.Gy)({max:e,maxErrorString:(0,b.Z)(a._('Please enter no more than {{ maxLength }} characters.', 'Validation error when a string is too long', 'Validation error when a string is too long'),{maxLength:e})}),W=e=>[X(n.ZP.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION,e)],J=e=>[(0,f.aH)({message:e._('Don\'t forget to name your board!', ' - ', ' -- ')}),X(n.ZP.MAX_CHARS_FOR_BOARD_TITLE,e)],G=({condition:e,children:a})=>e?(0,F.jsx)(o.xu,{position:"absolute",zIndex:d.b7,children:a}):a;class Y extends r.Component{constructor(e){super(e),$(this,"handleChangeName",({value:e})=>{let a=(0,f.FU)(J(this.props.i18n),e);this.setState({name:e,nameValidatorErrors:a})}),$(this,"handleChangeDescription",({value:e})=>{let a=(0,f.FU)(W(this.props.i18n),e);this.setState({description:e,descriptionValidatorErrors:a})}),$(this,"handleChangePrivacyToggle",({value:e})=>{let a="public";e&&(a=this.props.isAdAccount?"protected":"secret"),this.state.privacy!==a&&this.setState({privacy:a})}),$(this,"handleEnableSecret",()=>{this.setState({privacy:"secret",showSecretConfirmation:!1})}),$(this,"handleHideSecretConfirmation",()=>{this.setState({showSecretConfirmation:!1})}),$(this,"handleChangeRecommendationToggle",({value:e})=>{this.setState({allowHomefeedRecommendations:e})}),$(this,"handleChangeCollabBoardEmail",({value:e})=>{this.setState({collab_board_email:e})}),$(this,"handleChangeCollaboratorInvitesEnabled",({value:e})=>{this.setState({collaboratorInvitesEnabled:e})}),$(this,"handleCheckboxChange",e=>({event:a,checked:l})=>e({event:a,value:l})),$(this,"handleSubmit",e=>{let{onSubmit:a,shouldShowCollaboratorsInviteToggle:l}=this.props,{collab_board_email:t,collaboratorInvitesEnabled:r,description:o,name:n,privacy:s,allowHomefeedRecommendations:d}=this.state;if("preventDefault"in e&&e.preventDefault&&e.preventDefault(),this.submitDisabled())return;let c=n.trim(),u=o.trim();this.setState({submitting:!0,submitError:""}),a(l?{name:c,collab_board_email:t,collaborator_invites_enabled:r,description:u,privacy:s,allow_homefeed_recommendations:d}:{name:c,collab_board_email:t,description:u,privacy:s,allow_homefeed_recommendations:d}).then(()=>{this.setState({submitting:!1})}).catch(e=>{let a=this.props.i18n._('Uh oh! Something went wrong.', ' - ', ' -- '),l=(0,i.Z)(e,"message");if(l){let t=(0,i.Z)(e,"message_detail");a=t?`${l} ${t}`:l}else"string"==typeof e&&(a=e);this.setState({submitting:!1,submitError:a})})}),$(this,"handleShowBoardCoverEditModal",()=>{this.setState({showBoardCoverEdit:!0})}),$(this,"handleHideBoardCoverEditModal",()=>{this.setState({showBoardCoverEdit:!1})}),$(this,"handleShowCollaboratorsModal",()=>{this.setState({showCollaboratorsModal:!0})}),$(this,"handleHideCollaboratorsModal",()=>{this.setState({showCollaboratorsModal:!1})}),$(this,"handleSaveBoardCoverEditModal",e=>{this.handleHideBoardCoverEditModal();let{onCropChange:a}=this.props;a&&a(e)});let{board:{collab_board_email:a,collaborator_invites_enabled:l,description:t,name:r,pin_count:o,privacy:n,allow_homefeed_recommendations:s}}=e;this.state={collab_board_email:a,description:t,name:r,pin_count:o,privacy:n,allowHomefeedRecommendations:s,collaboratorInvitesEnabled:l,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showCollaboratorsModal:!1,showSecretConfirmation:!1,submitting:!1,previousName:r,previousDescription:t,previousPrivacy:n}}static getDerivedStateFromProps(e,a){let l={};return e.board.name&&e.board.name!==a.previousName&&(l.previousName=e.board.name,l.nameValidatorErrors=(0,f.FU)(J(e.i18n),e.board.name)),e.board.description&&e.board.description!==a.previousDescription&&(l.previousDescription=e.board.description,l.descriptionValidatorErrors=(0,f.FU)(W(e.i18n),e.board.description)),e.board.privacy&&e.board.privacy!==a.previousPrivacy&&(l.previousPrivacy=e.board.privacy),l}getFormFooter(){let{submitText:e}=this.props,{submitError:a}=this.state;return(0,F.jsxs)(r.Fragment,{children:[(0,F.jsx)(o.kC,{alignItems:"center",justifyContent:"end",wrap:!0,children:(0,F.jsx)(o.xu,{children:(0,F.jsx)(o.kC,{alignItems:"stretch",justifyContent:"start",children:(0,F.jsx)(o.xu,{height:48,children:(0,F.jsx)(o.zx,{color:"red",dataTestId:"board-form-submit-button",disabled:this.submitDisabled(),onClick:this.handleSubmit,size:"lg",text:e,type:"submit"})})})})}),a&&(0,F.jsx)(o.xu,{"aria-live":"polite",paddingX:1,tabIndex:0,children:(0,F.jsx)(o.xv,{color:"error",children:a})})]})}submitDisabled(){let{descriptionValidatorErrors:e,name:a,nameValidatorErrors:l,submitting:t}=this.state;return!a||l.length>0||e.length>0||t}render(){let{board:e,board:{archived_by_me_at:a,cover_pin:l,id:t,is_collaborative:n},coverImageHeight:i,coverImageWidth:c,currentUserIsOwner:h,handleBoardLeave:m,isAdAccount:b,isAdAccountOwner:g,isDeletable:p,isDesktop:f,isEditable:y,isNameAndSecretView:x,onClose:C,onDeleteButtonClick:k,requestContext:B,title:A,useModalWithNoLayer:w,showSecretBoardCreateToggle:E,shouldShowAddCollaborators:z,shouldShowCollaboratorsInviteToggle:T,setSelectedContacts:D,selectedContacts:L,isProfilePublisher:$,shouldUseOverlayPanel:X}=this.props,{allowHomefeedRecommendations:W,collab_board_email:J,collaboratorInvitesEnabled:Y,description:Q,descriptionValidatorErrors:ee,name:ea,nameValidatorErrors:el,pin_count:et,privacy:er,showBoardCoverEdit:eo,showCollaboratorsModal:en,showSecretConfirmation:ei}=this.state,es=y&&et>0,ed=e.is_ads_only,ec=(0,F.jsxs)(M,{children:[es&&(0,F.jsx)(I,{coverPin:l,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal}),(0,F.jsx)(O,{disabled:ed,name:ea,nameValidatorErrors:el,onChange:this.handleChangeName}),(0,F.jsx)(R,{description:Q,descriptionValidatorErrors:ee,onChange:this.handleChangeDescription}),h&&!!m&&(0,F.jsx)(K,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,F.jsxs)(o.pg,{legend:this.props.i18n._('Settings', 'BoardForm.BoardForm', 'Section heading in board edit form'),children:[(0,F.jsx)(N,{isProtectedToggler:!!b,isToggleDisable:!!b&&!g&&!$,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:er}),!a&&(0,F.jsx)(U,{allowHomefeedRecommendations:W,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,F.jsx)(S,{hasCollabBoardEmail:J,isCollaborative:n,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),T&&(0,F.jsx)(Z,{collaboratorInvitesEnabled:Y,isCollaborative:n,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled)})]}),p&&(0,F.jsxs)(o.xu,{marginTop:-15,paddingY:4,children:[(0,F.jsx)(o.X6,{accessibilityLevel:3,size:"100",children:(0,F.jsx)(o.xv,{inline:!0,size:"100",children:this.props.i18n._('Action', 'BoardForm.BoardForm.Action', 'Section heading in board edit form')})}),(0,F.jsxs)(o.iP,{onTap:k,children:[(0,F.jsx)(o.xu,{"data-test-id":"deleteBoardButton",marginBottom:1,marginTop:2,children:(0,F.jsx)(o.X6,{accessibilityLevel:4,size:"400",children:this.props.i18n._('Delete board', 'BoardForm.Delete', 'Delete board label')})}),(0,F.jsx)(o.xv,{color:"subtle",size:"300",children:(0,u.nk)(this.props.i18n._('You have {{ MAX_AGE_RECENTLY_DELETED_BOARD }}  days to restore a deleted Board. After that, it will be permanently deleted.', 'boardForm.delete.helperText', 'Delete board warning text'),{MAX_AGE_RECENTLY_DELETED_BOARD:v.Xq})})]})]})]});h?x&&(ec=(0,F.jsxs)(M,{children:[(0,F.jsx)(O,{disabled:ed,name:ea,nameValidatorErrors:el,onChange:this.handleChangeName}),!E&&(0,F.jsx)(N,{isProtectedToggler:!!b,isToggleDisable:!!b&&!g&&!$,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:er}),z&&(0,F.jsx)(P,{selectedContacts:L,setSelectedContacts:D})]})):ec=(0,F.jsxs)(M,{children:[!!m&&(0,F.jsx)(K,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,F.jsx)(S,{hasCollabBoardEmail:J,isCollaborative:n,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),!a&&ed&&(0,F.jsx)(U,{allowHomefeedRecommendations:W,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,F.jsx)(o.xv,{color:"subtle",size:"300",children:(0,u.nk)(this.props.i18n._('Only the board\u2019s owner ({{ boardOwner }}) can manage the rest of its features', 'BoardForm.CollaboratorPermissionsCopy', 'Copy on board edit form letting collaborators know of their permissions on a board'),{boardOwner:(0,F.jsx)(o.xv,{color:"subtle",inline:!0,size:"300",weight:"bold",children:e.owner.full_name})})})]});let eu=w?o.u_:s.ZP,eh=this.props.i18n._('Change board cover', 'BoardForm.BoardCoverEdit.heading', 'Change board cover heading'),em=(0,F.jsxs)(o.xu,{paddingY:8,position:"relative",children:[(0,F.jsx)(o.X6,{align:"center",size:"600",children:eh}),(0,F.jsx)(o.xu,{left:B.isRTL,paddingX:6,paddingY:8,position:"absolute",right:!B.isRTL,top:!0,children:(0,F.jsx)(o.hU,{accessibilityLabel:this.props.i18n._('Cancel change board cover', 'BoardForm.BoardCoverEdit.cancel', 'Cancel change board cover heading'),icon:"cancel",iconColor:"darkGray",onClick:this.handleHideBoardCoverEditModal,size:"md"})})]}),e_=this.props.i18n._('Board form', 'BoardForm.BoardForm', 'Accessibility label on board form'),eb=(0,F.jsx)(o.xu,{"data-test-id":"board-form-container",marginEnd:"auto",marginStart:"auto",rounding:2,children:(0,F.jsxs)("form",{method:"post",onSubmit:this.handleSubmit,children:[!ed&&ec,ed&&(0,F.jsx)(V,{board:e,collabBoardEmail:J,collaboratorInvitesEnabled:Y,coverPin:l,currentUserIsOwner:h,description:Q,descriptionValidatorErrors:ee,handleBoardLeave:m,handleChangeCollabBoardEmail:this.handleCheckboxChange(this.handleChangeCollabBoardEmail),handleChangeCollaboratorInvitesEnabled:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled),handleChangeDescription:this.handleChangeDescription,handleChangeName:this.handleChangeName,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal,handleShowCollaboratorsModal:this.handleShowCollaboratorsModal,isCollaborative:n,name:ea,nameValidatorErrors:el,shouldShowCollaboratorsInviteToggle:T,showCoverEdit:es})]})}),eg=X?(0,F.jsx)(o.mh,{zIndex:d.b7,children:(0,F.jsx)(o.To,{accessibilityLabel:e_,closeOnOutsideClick:!0,footer:this.getFormFooter(),heading:this.props.overlayPanelHeadingText,onDismiss:C,size:"sm",children:eb})}):(0,F.jsx)(G,{condition:!!w,children:(0,F.jsx)(eu,{accessibilityModalLabel:e_,footer:this.getFormFooter(),heading:A,onDismiss:C,size:"sm",children:eb})});return(0,F.jsxs)(r.Fragment,{children:[!eo&&!en&&eg,eo&&f&&(0,F.jsx)(_.Z,{children:(0,F.jsx)(H,{boardId:t,boardName:ea,coverPinId:l?.pin_id,frameHeight:i,frameWidth:c,heading:em,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal})}),ei&&(0,F.jsx)(j.Z,{confirmButtonLabel:this.props.i18n._('Make secret', 'Setting the boards visibility to secret', 'Setting the boards visibility to secret'),heading:this.props.i18n._('Are you sure?', 'Warning label asking users to be sure of their action', 'Warning label asking users to be sure of their action'),message:this.props.i18n._('If you make this board secret, some active ads will stop running', 'Explicitly warning users of the board visibility action they are doing', 'Explicitly warning users of the board visibility action they are doing'),onCancel:this.handleHideSecretConfirmation,onConfirm:this.handleEnableSecret}),en&&(0,F.jsx)(_.Z,{children:(0,F.jsx)(q,{board:e,fromBoardEditModal:!0,onDismiss:this.handleHideCollaboratorsModal})})]})}componentDidMount(){(0,t.Z)("BoardForm","/app/www/BoardForm/BoardForm.tsx")}}function Q(e){(0,r.useEffect)(()=>{(0,t.Z)("BoardForm","/app/www/BoardForm/BoardForm.tsx")},[]);let a=(0,c.ZP)(),l=(0,p.ZP)(),{checkExperiment:o}=(0,h.Z)(),n=!o("sg_hide_collab_invite_on_edit_modal").anyEnabled;return(0,F.jsx)(Y,{...e,i18n:a,isDesktop:"desktop"===l,requestContext:(0,m.B)(),shouldShowCollaboratorsInviteToggle:n,toastManagerContext:(0,g.dI)()})}$(Y,"defaultProps",{isNameAndSecretView:!1})},476482:function(e,a,l){l.d(a,{Z:()=>d});var t=l(281098),r=l(667294),o=l(20256),n=l(982166),i=l(19585),s=l(785893);function d({cancelButtonLabel:e,confirmButtonLabel:a,heading:l,message:d,onCancel:c,onConfirm:u}){(0,r.useEffect)(()=>{(0,t.Z)("BoardEditConfirmation","/app/www/boardEdit/BoardEditConfirmation.tsx")},[]);let h=(0,i.ZP)(),m=l||h._('Are you sure?', ' - ', ' -- '),_=e||h._('Cancel', ' - ', ' -- ');return(0,s.jsx)(n.ZP,{accessibilityModalLabel:m,footer:(0,s.jsxs)(o.xu,{marginEnd:-1,marginStart:-1,children:[(0,s.jsx)(o.xu,{"data-test-id":"cancel-button",padding:1,children:(0,s.jsx)(o.zx,{fullWidth:!0,onClick:c,size:"lg",text:_})}),(0,s.jsx)(o.xu,{"data-test-id":"confirm-button",padding:1,children:(0,s.jsx)(o.zx,{color:"red",fullWidth:!0,onClick:u,size:"lg",text:a})})]}),heading:m,onDismiss:c,role:"alertdialog",children:(0,s.jsx)(o.xu,{padding:4,children:(0,s.jsx)(o.xv,{children:d})})})}},415602:function(e,a,l){l.d(a,{A8:()=>y,CQ:()=>P,Cf:()=>f,DK:()=>b,GJ:()=>F,RZ:()=>x,SD:()=>C,aN:()=>j,h6:()=>p,tV:()=>B,xx:()=>v,yC:()=>A,zC:()=>g});var t,r,o,n,i,s,d,c=l(581722),u=l(167912),h=l(575108),m=l(980787),_=l(686319);let b=()=>{let e=(void 0!==t||(t=l(800679)).hash&&"850c5de9834cac0edfdd5652a78bffbf"!==t.hash&&console.error("The definition of 'collab_users_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),t),[a]=(0,u.useMutation)(e),{logContextEvent:r}=(0,m.u)();return async(e,l,t)=>{let o={boardId:e,collaboratorIds:l,message:t||""};return await new Promise((l,t)=>{a({variables:{...o},onCompleted:(a,o)=>{o&&t(o[0]),r({event_type:28,object_id_str:e}),l()},onError:e=>t(e)})})}},g=()=>{let e=(void 0!==r||(r=l(868455)).hash&&"de392a939a95d05f7ee889fe77a9e52d"!==r.hash&&console.error("The definition of 'collab_emails_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),[a]=(0,u.useMutation)(e),{logContextEvent:t}=(0,m.u)();return async(e,l,r)=>{let o={boardId:e,emails:l,message:r||""};return await new Promise((l,r)=>{a({variables:{...o},onCompleted:(a,o)=>{o&&r(o[0]),t({event_type:28,object_id_str:e}),l()},onError:e=>r(e)})})}},p=()=>{let e=(void 0!==o||(o=l(479699)).hash&&"40ae8061007ba5f53a4570e43e4ca864"!==o.hash&&console.error("The definition of 'collab_ApproveInvite_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o),[a]=(0,u.useMutation)(e),{logContextEvent:t}=(0,m.u)();return async(e,l)=>{let r={boardId:e,userId:l};return await new Promise((l,o)=>{a({variables:{...r},onCompleted:(a,r)=>{r&&o(r[0]),t({event_type:32,object_id_str:e}),l(a)},onError:e=>o(e)})})}};function f(e,a){return async l=>{await (0,_.Z)({url:`/v3/boards/${e}/collaborators/requests/ownership/`,method:"POST",data:{collaborator:a}}),l({type:"BOARD_OWNERSHIP_TRANSFER_REQUEST",payload:{boardId:e,collaboratorId:a}})}}function v(e,a){return async l=>{await (0,_.Z)({url:`/v3/boards/${e}/collaborators/requests/ownership/`,method:"DELETE",data:{collaborator:a}}),l({type:"BOARD_OWNERSHIP_TRANSFER_REQUEST_CANCEL",payload:{boardId:e}})}}let y=(e,a)=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e,collaboratingUser:a}}),x=()=>{let e=(void 0!==n||(n=l(608747)).hash&&"7005ce437a6a6ff33741ab44aa02cf61"!==n.hash&&console.error("The definition of 'collab_AcceptInvite_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),[a]=(0,u.useMutation)(e),{logContextEvent:t}=(0,m.u)();return async e=>{let l={boardId:e};return await new Promise((r,o)=>{a({variables:{...l},onCompleted:(a,l)=>{l&&o(l[0]),t({event_type:32,object_id_str:e}),r(a)},onError:e=>o(e)})})}},C=(e,a,l)=>async t=>{t(y(e,a)),(await h.Z.create("BoardInviteResource",{board_id:e,invited_user_id:a.id}).callUpdate()).resource_response.error||l({event_type:32,object_id_str:e})};function k(e,a){return{type:"BOARD_REQUEST_TO_JOIN",payload:{boardId:e,value:a}}}let B=()=>{let e=(void 0!==i||(i=l(336997)).hash&&"9aa22a7713214239538142ad2c957cc3"!==i.hash&&console.error("The definition of 'collab_RequestToJoin_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),[a]=(0,u.useMutation)(e),t=(0,c.I0)();return async e=>{let l={boardId:e};return await new Promise((r,o)=>{a({variables:{...l},onCompleted:(a,l)=>{l&&(t(k(e,!1)),o(l[0])),t(k(e,!0)),r(a)},onError:a=>{t(k(e,!1)),o(a)}})})}};function F(e,a){return l=>{(0,_.Z)({url:`/v3/boards/${e}/collaborators/invite/${a}/`,method:"DELETE",data:{board:e,user:a}}).catch(()=>{l(k(e,!0))}),l(k(e,!1))}}let P=()=>{let e=(void 0!==s||(s=l(296485)).hash&&"c62e5df78917dd238b70f366f358d487"!==s.hash&&console.error("The definition of 'collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s),[a]=(0,u.useMutation)(e),{logContextEvent:t}=(0,m.u)();return async(e,l,r)=>{let o={boardId:e,userId:l,ban:r||!1};return await new Promise((l,r)=>{a({variables:{...o},onCompleted:(a,o)=>{o&&r(o[0]),t({event_type:29,object_id_str:e}),l(a)},onError:e=>r(e)})})}},j=()=>{let e=(void 0!==d||(d=l(579965)).hash&&"2c3e1508650962adfff1171e950fa419"!==d.hash&&console.error("The definition of 'collab_RemoveBoardCollaborators_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),d),[a]=(0,u.useMutation)(e),{logContextEvent:t}=(0,m.u)();return async(e,l)=>{let r={board:e,collaboratorIds:[l]};return await new Promise((l,o)=>{a({variables:{...r},onCompleted:(a,r)=>{r&&o(r[0]),t({event_type:29,object_id_str:e}),l(a)},onError:e=>o(e)})})}},A=()=>{let e=P(),a=j();return(l,t,r)=>async()=>{let{invited_user:t,status:o,board:{id:n}}=l;t&&("accepted"===o?await a(n,t.id):await e(n,t.id,r))}}},812577:function(e,a,l){l.d(a,{I:()=>i,Z:()=>n});var t=l(886981),r=l(947810);let o=({boardId:e,ownerUsername:a,ownerName:l,ownerImgSrc:o})=>{let n=(0,r.Z)(),{data:i,isLoaded:s}=(0,t.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,...n?{orbac_subject_id:n}:{}}}),d=[{name:l,src:o,href:`/${a}/`,isDim:!1}];return s&&i&&i.length>0&&i.forEach(e=>{d.push({name:e&&e.invited_user?e.invited_user.full_name:"",color:e&&e.invited_user?e.invited_user.avatar_color_index:void 0,src:e&&e.invited_user?e.invited_user.image_medium_url:"",href:e&&e.invited_user?`/${e.invited_user.username}/`:"",isDim:e&&["new","contact_request_not_approved"].includes(e.status)})}),d},n=o;function i({children:e,...a}){return e(o(a))}},890774:function(e,a,l){l.d(a,{Z:()=>c});var t=l(581722),r=l(782677),o=l(575108),n=l(877956),i=l(440568),s=l(536652),d=l(72918);function c(){let e=(0,t.I0)(),a=(0,t.v9)(e=>e.resources);return async function({boardCreateOptions:l,deprecatedSchemaForNormalization:t}){let c=await o.Z.create("BoardResource",l).callCreate(),u=c.resource_response.data,h=t?(0,r.Fv)(u,t):void 0;e((0,d.XM)("BoardResource",l,c,h)),e((0,n.fO)({event_type:20})),u.owner?.id&&e((0,s.b)("UserResource",{options:{user_id:u.owner.id,field_set_key:"save_behavior"}}));let m=a.BoardsResource||{},_=a.BoardsFeedResource||{};return Object.keys(m).forEach(a=>{(0,i.k)(a).username===u.owner?.username&&e((0,d.jB)("BoardsResource",a))}),Object.keys(_).forEach(a=>{(0,i.k)(a).username===u.owner?.username&&e((0,d.jB)("BoardsFeedResource",a))}),u}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/2944-12a9b0df3ebe2347.mjs.map