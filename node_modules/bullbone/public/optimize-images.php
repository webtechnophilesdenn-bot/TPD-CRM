<?php
// Simple image optimization
$images = glob('images/*.{jpg,jpeg,png}', GLOB_BRACE);

foreach ($images as $image) {
    $info = pathinfo($image);
    $webp = $info['dirname'] . '/' . $info['filename'] . '.webp';
    
    if (!file_exists($webp)) {
        // Create WebP version
        if ($info['extension'] == 'jpg' || $info['extension'] == 'jpeg') {
            $img = imagecreatefromjpeg($image);
        } else {
            $img = imagecreatefrompng($image);
        }
        
        // Resize if too large
        $width = imagesx($img);
        if ($width > 1200) {
            $newWidth = 1200;
            $newHeight = imagesy($img) * ($newWidth / $width);
            $newImg = imagescale($img, $newWidth, $newHeight);
            imagedestroy($img);
            $img = $newImg;
        }
        
        // Save as WebP
        imagewebp($img, $webp, 80);
        imagedestroy($img);
        
        echo "Created: $webp<br>";
    }
}
echo "âœ… Images optimized!";